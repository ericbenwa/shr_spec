Grammar:			DataElement 5.0
Namespace:			shr.environment
Description:		"The SHR Environment domain contains definitions related to surroundings experienced by the person of record, including both the physical and sociological environments."
Uses:				shr.core, shr.base, shr.finding, shr.action, shr.entity, shr.allergy, shr.medication, shr.procedure

CodeSystem:		CURRENCY = urn:iso:std:iso:4217

//------------ Household Information --------------------------

EntryElement:	FinancialSituationPanel
Concept:		LNC#83335-0
Based on:		HeadlessPanel
Description:	"Measures of the ability of the subject to obtain and pay for the necessities of life."
				Code is LNC#83335-0
				PanelMembers.Observation
includes 0..1	AnnualIncome
includes 0..*	IncomeSource
includes 0..1	IncomeStability
includes 0..1	IncomeAdequacy
includes 0..1	CanAffordHousing
includes 0..*	NonCashBenefit

	EntryElement:	AnnualIncome
	Concept:		MTH#C0557163
	Based on:		CodedSocialHistoryObservation
	Description:	"The amount of earnings made by a family unit in one year, estimated or self-reported."
					Code is MTH#C0557163
					DataValue value is type Range
					DataValue.LowerBound.Quantity.Units is CURRENCY#USD
					DataValue.UpperBound.Quantity.Units is CURRENCY#USD

	EntryElement:	IncomeSource
	Concept:		MTH#C0557162
	Based on:		CodedSocialHistoryObservation
	Description:	"Where the household income comes from."
					Code is MTH#C0557162
					DataValue from IncomeSourceVS

	EntryElement:	IncomeStability
	Concept:		MTH#C1820459
	Based on:		CodedSocialHistoryObservation
	Description:	"Whether the subject regards his or her source of income as dependable."
					Code is MTH#C1820459
					DataValue from ResourceStabilityVS

	EntryElement:	IncomeAdequacy
	Concept:		MTH#C1820459
	Based on:		Panel
	Description:	"Whether the subject regards his or her source of income as sufficient to meet the needs of the subject and his/her dependents."
					Code is MTH#C1820459
					DataValue from IncomeAdequacyVS
					Components.ComponentObservation
	includes 0..1	CanAffordFood
	includes 0..1	CanAffordHousing
	includes 0..1	CanAffordUtilities
	includes 0..1	CanAffordTransportation
	includes 0..1	CanAffordMedication
	includes 0..1	CanAffordDentalCare
	includes 0..1	CanAffordChildCare

	Element:		CanAffordFood
	Based on:		CodedObservationComponent
	Description:	"How often can the subject afford food?"
					Code is TBD#TBD
					DataValue from QualitativeFrequencyVS
	
	Element:		CanAffordHousing
	Based on:		CodedObservationComponent
	Description:	"How often can the subject afford housing?"
					Code is TBD#TBD
					DataValue from QualitativeFrequencyVS

	EntryElement:	CanAffordUtilities
	Based on:		CodedObservationComponent
	Description:	"How often can the subject afford utilities?"
					Code is TBD#TBD
					DataValue from QualitativeFrequencyVS

	EntryElement:	CanAffordTransportation
	Based on:		CodedObservationComponent
	Description:	"How often can the subject afford transportation?"
					Code is TBD#TBD
					DataValue from QualitativeFrequencyVS

	EntryElement:	CanAffordMedication
	Concept:		TBD
	Based on:		CodedObservationComponent
	Description:	"How often can the subject afford medications?"
					Code is TBD#TBD
					DataValue from QualitativeFrequencyVS

	EntryElement:	CanAffordDentalCare
	Concept:		TBD
	Based on:		CodedObservationComponent
	Description:	"How often can the subject afford dental care?"
					Code is TBD#TBD
					DataValue from QualitativeFrequencyVS

	EntryElement:	CanAffordChildCare
	Concept:		TBD
	Based on:		CodedObservationComponent
	Description:	"How often can the subject afford child care?"
					Code is TBD#TBD
					DataValue from QualitativeFrequencyVS


EntryElement:	HouseholdSituation
Based on:		SocialHistoryObservation
Description:	"Information about the makeup of the household of the subject."
				Code is TBD#TBD
				Components.ObservationComponent
includes 0..1	HouseholdSize
includes 0..*	Coinhabitant
includes 0..1	NumberOfDependents

		EntryElement:	HouseholdSize
		Based on:		QuantitativeObservationComponent
		Description:	"The number of people living together with mutual financial dependency. Besides the subject, the household size may include spouse or partner, dependent children including adopted and foster children, dependent parents, dependent siblings and other relatives, but not roommates, ex-spouses, non-dependent children, and unborn children. If the subject lives alone, the household size is 1."
						Code is MTH#C0000768
						DataValue.Quantity.Units is UCUM#1


		EntryElement:	Coinhabitant
		Based on:		CodedObservationComponent
		Description: 	"A person living with the subject."
						Code is TBD#TBD
						DataValue from CoinhabitantVS

		EntryElement:	NumberOfDependents
		Based on:		QuantitativeObservationComponent
		Description:	"The number of dependents supported by the subject."
						Code is MTH#C0557509
						DataValue.Quantity.Units is UCUM#1


//------------- Exposures ---------------------

				
EntryElement:	ExposureToAgent
Based on:		CodedNonLaboratoryObservation
Description:	"Exposure to various agents (substance, disease vector, blood products, farm animals or pets, recreational drugs, sexual transmitted diseases, foods, toxins, pathogens, noise, radiation, pollutants, or prenatal exposures to teratogens, etc)."
				Code is MTH#C0332157 "Exposure to"
				DataValue could be from http://hl7.org/fhir/ValueSet/substance-code
				EvaluationComponent
includes 0..*	ExposureSourceOrVector
includes 0..*	ExposureAmount
includes 0..*	ExposureReason
includes 0..*	ExposureMethod
includes 0..*	ExposureRoute



1..1			Status // from http://hl7.org/fhir/ValueSet/allergy-verification-status
				// Conflict between V2 and V3 -- Cannot override value set constraint from http://hl7.org/fhir/ValueSet/allergy-intolerance-status to http://hl7.org/fhir/ValueSet/allergy-verification-status
0..1			ClinicalStatus from http://hl7.org/fhir/ValueSet/allergy-clinical-status
1..1			Code // from http://hl7.org/fhir/us/core/ValueSet-us-core-substance.html if covered  		// DSTU 2 change different required value sets
0..1			SubstanceCategory   // DSTU 2 change (restrict upper cardinality to 1)
0..1			Onset
0..1			Type from http://hl7.org/fhir/ValueSet/allergy-intolerance-type
0..1			Criticality
0..1			MostRecentOccurrenceTime
0..*			AllergyIntoleranceReaction



		Element:		ExposureSourceOrVector
		Based on:		EvaluationComponent
		Concept:		MTH#C0012656
		Description:	"Where the substance originated. Vectors include animals (e.g., tick, mosquito, cats, livestock) capable of transmitting an infectious agent among vertebrates. Sources could include food, contaminated drinking water, air, radon gas in the home, etc."
		Value:			CodeableConcept from TBD "ExposureSourceOrVectorVS"

		Element:		ExposureAmount
		Based on:		EvaluationComponent
		Concept:		TBD
		Description:	"The amount of substance used or exposed to in a given period of time (e.g., 10 cigarettes per day). Can also be used to record total lifetime exposure (e.g., 80 REMS/lifetime)."
		Value:			Ratio
		
		Element:		ExposureMethod
		Based on:		EvaluationComponent
		Concept:		TBD
		Description:	"How the exposure occurred, e.g. cutaneous contact, injection, ingestion, sexual contact, inhalation."
		Value:			CodeableConcept from TBD "ExposureMethodVS"

		Element:		ExposureReason
		Based on:		EvaluationComponent
		Concept:		TBD
		Description:	"Why the exposure occurred."
		Value:			CodeableConcept from ExposureReasonVS

		// This is redundant with RouteIntoBody, but that isn't an EvaluationComponent
		Element:		ExposureRoute
		Based on:		EvaluationComponent
		Concept:		MTH#C0013153
		Description:	"The way a substance enters an organism after contact, particularly, the route of drug administration."
		Value:			CodeableConcept from http://hl7.org/fhir/ValueSet/route-codes

		
		
EntryElement:	AnimalExposure
Concept:		MTH#C0238646
Based on:		ExposureToAgent
Description:	"The type of animals or pets the subject is exposed to."
Value:			CodeableConcept from CommonAnimalVS if covered
				Code is MTH#C0238646


EntryElement:	SocialEnvironment
Based on:		SocialHistoryObservation
Concept:		TBD
Description:	"Factors affecting the health of the subject in their daily living environment."
0..0			Value
				Code is TBD#TBD
				PanelMembers.EvaluationTopic
includes 0..1	TransportationAvailability
includes 0..1	HousingSecurity
includes 0..1	PhysicalSafety
includes 0..1	EmotionalSafety
includes 0..1	DomesticViolence
includes 0..*	HomeEnvironmentRisk

	EntryElement:	TransportationAvailability
	Based on:		SocialHistoryObservation
	Concept:		TBD
	Description:	"Whether the subject has reliable transportation to bring him or her to medical appointments and to get medications."
	Value:			CodeableConcept from QualitativeFrequencyVS
					Code is TBD#TBD

	EntryElement:	HousingSecurity
	Based on:		SocialHistoryObservation
	Concept:		TBD
	Description:	"Whether the subject is at-risk of losing their housing or in a stable housing situation."
	Value:			CodeableConcept from ResourceStabilityVS
					Code is TBD#TBD

	EntryElement:	PhysicalSafety
	Based on:		SocialHistoryObservation
	Concept:		TBD
	Description:	"How often the subject feels physically safe in the subject's home environment."
	Value:			CodeableConcept from QualitativeFrequencyVS
					Code is TBD#TBD

	EntryElement:	EmotionalSafety
	Based on:		SocialHistoryObservation
	Concept:		TBD
	Description:	"Whether the subject feels physically safe in the subject's home environment."
	Value:			CodeableConcept from QualitativeFrequencyVS
					Code is TBD#TBD

	EntryElement:	DomesticViolence
	Based on:		SocialHistoryObservation
	Concept:		MTH#C0206073
	Description:	"Whether the subject experiences domestic violence."
	Value:			CodeableConcept from QualitativeFrequencyVS
					Code is TBD#TBD

	EntryElement:	HomeEnvironmentRisk
	Based on:		SocialHistoryObservation
	Concept:		TBD
	Description:	"A risk experienced in the home environment."
	Value:			CodeableConcept from HomeEnvironmentRiskVS
					Code is TBD#TBD


/*
EntryElement:	Depression
EntryElement:	Anxiety
EntryElement:	JusticeInvolvement
*/