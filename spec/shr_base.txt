Grammar:		DataElement 5.0
Namespace:		shr.base
Description:	"Contains the SHR Entry definition -- the metadata added to any independent item in the SHR."
Uses:			shr.core

CodeSystem:		MTH = http://ncimeta.nci.nih.gov

Element: 		Entry
Concept:		MTH#C1705654
Description:	"Metadata attributes that apply to any item represented in the standard health record. An Entry may not belong exclusively to a single person's health record, but could represent an entity that surfaces in multiple records, such as organizations or practitioners. If the entry belongs to a single person's record, then the identity of the person of record must be recorded."
0..1			ShrId
1..1			EntryId
0..1			Version
				Version value is type id
1..1			EntryType
1..1    		CreationTime
1..1			LastUpdated
0..1			Narrative
0..1			Language
0..*			SecurityLabel
0..*			Tag
0..*			DerivedFrom


	Element:		ShrId
	Concept:		TBD
	Description:	"A unique, persistent, permanent identifier for the overall health record belonging to the PersonOfRecord."
	Value:			id
	
	Element:    	EntryId
	Concept:        MTH#C0600091
	Description:    "A persistent, permanent identifier for an entry in a health record, unique within the scope of the health record."
	Value:          id
	
	Element:		EntryType  // Would EntryClass be clearer?
	Concept:		TBD
	Description:	"SHR data element identifier, as a URI."
	Value:			uri

	Element: 		LastUpdated
	Concept:		TBD
	Description:	"The most recent date the entry was changed."
	Value:			instant

	Element:		Narrative
	Concept:		TBD
	Description:	"A human-readable narrative, potentially including images, that contains a summary of the resource, and may be used to represent the content of the resource to a human."
	Value:			xhtml
	1..1			NarrativeQualifier

			Element:		NarrativeQualifier
			Concept:		TBD
			Description:	"Additional information on how the narrative was generated, and the scope of information contained."
			Value:			code from http://hl7.org/fhir/ValueSet/narrative-status
	
	Element:		SecurityLabel
	Concept:		TBD
	Description:	"A code that connects the entry to a security policy. Security labels can be updated when the resource changes, or whenever the security sub-system chooses to."
	Value:			Coding
	
	Element:		Tag
	Concept:		TBD
	Description:	"A code used to relate entries to categories or workflows. Applications are not required to consider the tags when interpreting the meaning of an entry."
	Value:			Coding
	
	Element:		DerivedFrom
	Concept:		TBD
	Description:	"Indicates the source of information in the case the Entry has been created by logical extension or modification of one or more source entries."
	Value:			ref(Statement)

	Element:		Version
	Concept:		MTH#C0333052
	Description:	"A number or code associated with the product that identifies a particular release iteration."
	Value:			string or id
	

//------------ BASE CLASSES----------------
// PRINCIPLES:
// 		NO CONCEPT MODEL --- THAT'S TERMNOLOGY - this means we will never have a type hierarchy
// 		FLAT, PURPOSE-AGNOSTIC LIST OF OBSERVATIONS AND ASSERTIONS THAT CAN BE GROUPED AS NEEDED
//		NO NEED TO DISTINGUISH "STAND-ALONE" FROM "COMPONENT" OBSERVATIONS, OR PANELS FROM "COMPOUND OBSERVATIONS"
//		ALL COMPUTABLE INFORMATION IN CODES -- CLASS NAMES ARE CONSIDERED NON-COMPUTABLE AND CANNOT BE RELIED UPON AS ANYTHING OTHER THAN A HUMAN-READABLE DESCRIPTION OF THE CONTENTS
// 		OPEN-WORLD ASSUMPTION 
// 			* just because something isn't stated, it doesn't mean it doesn't exist
//			* something stated to NOT exist, does not exist
//	


Abstract Element:	Statement
Description:		"A stand-alone clinical statement. 
A clinical statement can assert something exists or is present, does not exist or is not present, incorporate an observation result, or containt a collection of information, such as a complete blood count panel."
0..1				ContextCode

		Element:		ContextCode	
		Description:	"A code representing the ontological status of the statement, e.g., whether it exists, does not exist, is planned, etc."
		Value:			CodeableConcept

Abstract Element: Assertion
Based on:		Statement
Description:	"A statement that asserts a situation, phenomenon, or relationship between two things"

//1..1			RelevantTime

Abstract Element: AssertPresence
Based on:		Assertion
				ContextCode is SCT#705057003 "Presence (qualifier value)"  // more like 'existence'
1..1			TypeCode
0..1			BelongsTo  // what other thing 'has' this thing (ie. patient has condition; condition belongs to patient)
0..1			EntityIdentifier

		Element:		TypeCode
		Description:	"A code identifying the type of item, for example, the type of lab, the type of panel, the type thing asserted, etc."
		Value:			CodeableConcept

		Element: 		EntityIdentifier
		Description:	"An identifier for the entity that is asserted to be present. For example, if asserting the presence of a wound, this is the wound number used to track the wound's condition over time."
		Value:			id

Abstract Element: AssertAbsence
Based on:		Assertion
				ContextCode is SCT#2667000 "Absent (qualifier value)"
1..1			TypeCode
0..1			BelongsTo  // what doesn't have the thing

		Element:	BelongsTo
		Value:		Statement

Abstract Element: AssertRelationship
Based on:		Assertion
Description: 	"Note that since a relationship is an assertion, it can be the subject of statements."
1..1			Subject
1..1			RelationshipCode
1..1			Object

		Element:		Subject
		Description:	"The phenomenon (person, place, event, condition, other statement) that the phenomenon of this statement addresses or belongs to."
		Value:			Statement

		Element:		RelationshipCode
		Description:	"An assertion about the subject, expressed as a code; can be viewed as a relationship between Subject and Object."
		Value:			CodeableConcept

		Element:		Object
		Description:	"The phenomenon (person, place, event, condition, other statement) that the phenomenon of this statement addresses or belongs to."
		Value:			Statement

Abstract Element: EvaluationResult
Based on:		Statement
Description:	"A statement that asserts the value of a property of a thing."
				ContextCode is SCT#424975005 "Record Entity"
1..1			Subject
1..1			ObservableCode
1..1			ResultValue
0..1			RelevantTime
1..1			FindingStatus

		Element:		ObservableCode
		Description: 	"The property of the Subject being observed or measured. Also can be viewed as the 'question' to the result value's 'answer'.'"
		Value:			CodeableConcept

		Element:		RelevantTime
		Description:	"The time or time period that the statement addresses."
		Value:			dateTime or TimePeriod 

		Element:		ResultValue
		Description:	"The finding itself, such as the blood pressure value recorded."
		Value:			(Quantity or CodeableConcept or string or boolean or Range or Ratio or time or dateTime or TimePeriod or Media)
	
		Element:		FindingStatus
		Concept:		TBD
		Description:	"Indicates whether the finding is preliminary, amended, final, etc."
		Value:			code from http://hl7.org/fhir/ValueSet/observation-status
// + ExceptionValue, DeltaFlag, Issued, Observer, Recorder, +Method of observation, etc.

EntryElement:	CodedEvaluationResult
Based on:		EvaluationResult
				ResultValue value is type CodeableConcept

EntryElement:	QuantitativeEvaluationResult
Based on:		EvaluationResult
				ResultValue value is type Quantity

EntryElement:	TemporalEvaluationResult
Based on:		EvaluationResult
				ResultValue value is type dateTime




