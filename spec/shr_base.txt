Grammar:		DataElement 5.0
Namespace:		shr.base
Description:	"Contains the SHR Entry definition -- the metadata added to any independent item in the SHR."
Uses:			shr.core, shr.entity, shr.encounter

CodeSystem:		MTH = http://ncimeta.nci.nih.gov
CodeSystem:     LNC = http://loinc.org
CodeSystem:     SCT = http://snomed.info/sct
CodeSystem:		NCI = https://evs.nci.nih.gov/ftp1/CDISC/SDTM/
CodeSystem:		OBSCAT = http://hl7.org/fhir/observation-category

// NOTE: Entry will eventually be deprecated, as its fields are really a part
// of the implementation, not part of the model. Once the CIMPL tooling
// makes these implicit, Entry and its field elements will go away.
Element: 		Entry
Concept:		MTH#C1705654
Description:	"Obsolete. Use DomainResource"
0..1			ShrId
0..1			EntryId
0..1			EntryType

	Element:			ShrId
	Concept:			TBD
	Description:	"A unique, persistent, permanent identifier for the overall health record belonging to the Patient."
	Value:				id
	
	Element:    	EntryId
	Concept:      MTH#C0600091
	Description:  "A persistent, permanent identifier for an entry in a health record, unique within the scope of the health record."
	Value:        id

	Element:			EntryType  // Would EntryClass be clearer?
	Concept:			TBD
	Description:	"The class of the item, as a URI."
	Value:				uri


Abstract Element:	Resource
Description:	"Parent class for any item in clinical or administrative health-related system. Contains metadata attributes that apply to any item represented in the standard health record. An DomainResource can belong to a single person's health record, or represent an entity that surfaces in multiple records, such as organizations, providers, payments, decision support artifacts, etc."
0..1			Metadata
0..1			Language from http://hl7.org/fhir/ValueSet/languages if covered  // DSTU 2 change -- language has required binding in Argonaut
0..1			ImplicitRules

	Element:		Language
	Concept:		MTH#C0023008
	Description: 	"A human language, spoken or written."
	Value:			CodeableConcept

	Element:		ImplicitRules
	Description: 	"A set of rules under which this content was created"
	Value:			uri


Abstract Element: DomainResource
Based on:		Resource
Description:	"Parent class for any item in clinical or administrative health-related system. A DomainResource can belong to a single person's health record, or represent an entity that surfaces in multiple records, such as organizations, providers, payments, decision support artifacts, etc."
0..1			Narrative
0..1			StatusOrActive
0..*			Identifier

		Element:		Narrative
		Concept:		TBD
		Description:	"A human-readable narrative, potentially including images, that contains a summary of the resource, and may be used to represent the content of the resource to a human."
		1..1			NarrativeText
		1..1			NarrativeQualifier

				Element:		NarrativeText
				Description:	"Text of narrative, in xhtml."
				Value:			xhtml

				Element:		NarrativeQualifier
				Description:	"Additional information on how the narrative was generated, and the scope of information contained."
				Value:			CodeableConcept from http://hl7.org/fhir/ValueSet/narrative-status

		Abstract Element:	StatusOrActive
		Description:		"Abstract class for a property that defines either the status of the recource, or whether the resource is active."
		Value:				boolean or CodeableConcept

		Element:		Status
		Based on:		StatusOrActive
		Description:	"A state that relates to the workflow or interpretation of this resource. Certain status values can modify the meaning of the resource, for example, entered-in-error. When a boolean value is used, Status of true indicates the record is active, false means inactive."
		Value:			CodeableConcept should be from http://hl7.org/fhir/ValueSet/resource-status

		Element:		Active
		Based on:		StatusOrActive
		Description:	"A flag that indicates whether the resource record is active, or inactive and ignored for all but historical purposes."
		Value:			boolean


Element:		Metadata
Description:	"Elements that belong to all information items."
0..1			VersionId
0..1			LastUpdated
//0..1			SourceSystem  // R4 only
0..*			SecurityLabel
0..*			Tag

	Element:		VersionId
	Concept:		MTH#C0333052
	Description:	"An identifier associated with the product that denotes a particular release iteration."
	Value:			id

	Element: 		LastUpdated
	Concept:		TBD
	Description:	"The most recent date the information item was changed."
	Value:			instant

/*
	Element:		SourceSystem
	Description:	"FHIR: This provides a minimal amount of Provenance information that can be used to track or differentiate the source of information in the resource. The source may identify another FHIR server, document, message, database, etc. 
	FHIM: Identifies the computer system that created the medical record. This optional field may also be used to indicate that the medical record was originally created by a different organization from the one that is currently storing or utilizing the record in that the assigning authority of the Id could be set to that originating organization. This property is optional, as some systems will assume that all records that it contains originated in that system, however it is anticipated that it will become increasingly commonplace for records from multiple systems and organizations will be comingled in order to provide a complete picture of the patient's health record."
	Value:			uri
*/	
	Element:		SecurityLabel
	Concept:		MTH#C3858779 "security classification"
	Description:	"A code that connects the entry to a security policy. Security labels can be updated when the resource changes, or whenever the security sub-system chooses to."
	Value:			CodeableConcept
	
	Element:		Tag
	Concept:		MTH#C4280044  "Metatags"
	Description:	"A code used to relate entries to categories or workflows. Applications are not required to consider the tags when interpreting the meaning of an entry."
	Value:			CodeableConcept


Abstract Element:	ClinicalStatement
Based on:		DomainResource
Description:	"This abstract class provides properties and behaviors common to entries in a medical record. Patient and Encounter are ubiquitous in clinical statements. This class also allows for common representation of simple data provenance elements asserter, recorder, and creation date."
0..1			Patient
0..1			Encounter
0..1			CreationDate
0..1			Asserter
0..1			Recorder

	Element: 		Asserter
	Concept:		TBD
	Description:	"The origin or source of the information or request: a practitioner, patient, related person, organization, an algorithm, device, etc."
	Value:			ref(EntityOrRole)

	Element:		Recorder
	Concept:		TBD
	Description:	"The recorder of the information, if other than the information originator. For example, the nurse taking a list of medications reported by the patient."
	Value:			ref(EntityOrRole)

	Element:		Participant
	Concept:		MTH#C1550369
	Description:	"An entity (usually a Practitioner, Patient, or Organization but potentially a device or other entity) that participates in a healthcare task or activity. A code can be used to indicate a generic type of participant, e.g., mother, EMT, or social worker."
	Value:			ref(EntityOrRole)

	Element:		CreationDate
	Concept:		TBD
	Description:	"The date/time the information was asserted or created; usually, when the clinical statement was initially recorded."
	Value:			dateTime


EntryElement:	Composition
Based on:		DomainResource
Description:	"A composition represents a set of Entries sharing common provenance, a document such as an extract from a patient record, a knowledge artifact, or a catalog definition."
0..1			Identifier // FHIR inconsistency -- usually 0..*
				StatusOrActive is type Status
1..1            Status from http://hl7.org/fhir/ValueSet/composition-status
1..1            Type should be from http://hl7.org/fhir/ValueSet/doc-typecodes
0..*            Section

    Element:        Section
    Description:    "Represents a section containing entries in a composition."
    //0..1            Title
    0..*            DomainResource
	0..*			Section

// Combined participant roles

		Element:		PatientOrPractitioner
		Based on:		EntityOrRole
		Description:	"A choice of Patient or Practitioner. Needed for mapping to FHIR."
		Value:			ref(Patient) or ref(Practitioner)

		Element:		PatientOrPractitionerOrRelatedPerson
		Based on:		EntityOrRole
		Description:	"A choice of Patient, Practitioner and RelatedPerson. Needed for mapping to FHIR, for example, mapping AdverseEvent.SignedBy to FHIR AdverseEvent."
		Value:			ref(Patient) or ref(Practitioner) or ref(RelatedPerson)

		Element:		PractitionerOrRelatedPerson
		Based on:		EntityOrRole
		Description:	"A choice of Practitioner and RelatedPerson. Needed for mapping to FHIR, for example, mapping EncounterPerformed.Participant to FHIR Encounter.participant.individual"
		Value:			ref(Practitioner) or ref(RelatedPerson)

		Element:		PersonOrOrganization
		Based on:		EntityOrRole
		Description:	"A choice of Person (in any role) or Organization. Needed for mapping to FHIR."
		Value:			ref(Patient) or ref(Practitioner) or ref(RelatedPerson) or ref(Organization)

		Element:		PersonOrDevice
		Based on:		EntityOrRole
		Description:	"A choice of Person (in any role) or Organization. Needed for mapping to FHIR."
		Value:			ref(Patient) or ref(Practitioner) or ref(RelatedPerson) or ref(Device)

		Element:		PersonOrOrganizationOrDevice
		Based on:		EntityOrRole
		Description:	"Constrains participants to classes that are accepted by FHIR as actors in procedures in STU 3."
		Value:			ref(Practitioner) or ref(Organization) or ref(Patient) or ref(RelatedPerson) or ref(Device)

		Element:		PractitionerOrDevice
		Based on:		EntityOrRole
		Description:	"A choice of Practitioner or Device. Needed for mapping to FHIR."
		Value:			ref(Practitioner) or ref(Device)


/*
	Element:    	HealthRecordId
	Concept:        MTH#C1549718
	Description:    "A unique, persistent, permanent identifier for a health record."
	Value:          id
	
	Element:		DerivedFrom
	Concept:		TBD
	Description:	"Indicates the source of information in the case the Entry has been created by logical extension or modification of one or more source entries."
	Value:			ref(DomainResource)
	
	Element:		SignedBy
	Description:	"Provenance information specific to the signing of the clinical statement."
	Value:			Participant

	Element:		CosignedBy
	Description:	"Provenance information specific to the cosigning of the clinical statement."
	Value:			Participant

	Element:		VerifiedBy
	Description:	"Provenance information specific to the verification process associated with this statement (e.g., verifier, when verified, etc.)"
	Value:			Participant


*/

