Grammar:		DataElement 5.0
Namespace:		shr.base
Description:	"Contains the SHR Entry definition -- the metadata added to any independent item in the SHR."
Uses:			shr.core

CodeSystem:		MTH = http://ncimeta.nci.nih.gov


//------------ BASE CLASSES----------------
/* PRINCIPLES:
1) NO CONCEPT MODEL --- THAT'S TERMNOLOGY - this means we will never have a type hierarchy
2)  FLAT, PURPOSE-AGNOSTIC LIST OF OBSERVATIONS AND ASSERTIONS THAT CAN BE GROUPED AS NEEDED
3)  NO NEED TO DISTINGUISH "STAND-ALONE" FROM "COMPONENT" OBSERVATIONS, OR PANELS FROM "COMPOUND OBSERVATIONS"
4) ALL COMPUTABLE INFORMATION IN CODES -- CLASS NAMES ARE CONSIDERED NON-COMPUTABLE AND CANNOT BE RELIED UPON AS ANYTHING OTHER THAN A HUMAN-READABLE DESCRIPTION OF THE CONTENTS
5)  OPEN-WORLD ASSUMPTION 
* just because something isn't stated, it doesn't mean it doesn't exist
* something stated to NOT exist, does not exist

Differences between Assertion and EvaluationResult:
1)  Assertion is a statement of existence or non-existence of a condition, person, place, or entity for a thing that can be tracked over time.
	a.  The type of entity that exists/does not exist
	b.	What the new entity is associated with
	c.  How the new entity is associated
2)  An assertion represents the new thing and can be assigned a business identifier to refer to 
3)  The assertion represents the thing
4)  Evaluation results speak to the value of a property of a thing
5)  The subject of an ER can be an assertion (e.g. wound present) or say more about an evaluation result (e.g. the % area that has a certain color)
							
*/

Abstract Element:	Statement
Description:		"A stand-alone clinical statement. 
A clinical statement can assert something exists or is present, does not exist or is not present, incorporate an observation result, or containt a collection of information, such as a complete blood count panel."
0..1				ContextCode
0..1				RelevantTime

		Element:		ContextCode	
		Description:	"A code representing the ontological status of the statement, e.g., whether it exists, does not exist, is planned, etc."
		Value:			CodeableConcept

		Element:		RelevantTime
		Description:	"The time or time period that the statement addresses."
		Value:			dateTime or TimePeriod 


Abstract Element:	Assertion
Based on:			Statement
Description:		"Any assertion of a measured value, relationship, situation, condition, or phenomenon present or absent."
1..1				Subject
1..1				ObservableCode
0..1				ResultValue
0..1				ResultObject
0..1				ObjectIdentifier
1..1				FindingStatus

		Element:		Subject
		Description:	"The phenomenon (person, place, event, condition, other statement) that the phenomenon of this statement addresses or belongs to."
		Value:			Statement

		Element:		ObservableCode
		Description: 	"The property of the Subject being observed or measured. Also can be viewed as the 'question' to the result value's 'answer'.'"
		Value:			CodeableConcept

		Element:		ResultValue
		Description:	"The finding itself, such as the blood pressure value recorded."
		Value:			(Quantity or CodeableConcept or string or boolean or Range or Ratio or time or dateTime or TimePeriod or Media)

		Element:		ResultObject
		Description:	"The phenomenon (person, place, event, condition, other statement) that the subject of this statement addresses or belongs to."
		Value:			Statement
	
		Element:		FindingStatus
		Concept:		TBD
		Description:	"Indicates whether the finding is preliminary, amended, final, etc."
		Value:			code from http://hl7.org/fhir/ValueSet/observation-status
// + ExceptionValue, DeltaFlag, Issued, Observer, Recorder, +Method of observation, etc.

		Element: 		ObjectIdentifier
		Description:	"An identifier for the object implied by the assertion, which allows the object to be tracked over time. For example, a wound number is used to track a specific wound's condition over time."
		Value:			id


Abstract Element: 	AssertPresentAbsent
Based on:			Assertion
Description:		"A statement that asserts the presence or absence of a situation, phenomenon, or relationship between two things."
					ContextCode from PresentAbsentVS


Abstract Element:	AssertPresent
Based on:			AssertPresentAbsent
Description:		"An assertion of the existence of relationship or situation, condition, or phenomenon."
					ContextCode is SCT#705057003  "Presence (qualifier value)"

Abstract Element:	AssertAbsent
Based on:			AssertPresentAbsent
Description:		"An assertion of the existence of relationship or situation, condition, or phenomenon."
					ContextCode is SCT#2667000   "Absent (qualifier value)"

Abstract Element: 	EvaluationResult
Based on:			Assertion
Description:		"A statement that asserts the value of a property of a thing."
					ContextCode is SCT#424975005 "Record Entity"

EntryElement:		CodedEvaluationResult
Based on:			EvaluationResult
					ResultValue value is type CodeableConcept

EntryElement:		QuantitativeEvaluationResult
Based on:			EvaluationResult
					ResultValue value is type Quantity

// -------------  Groups -----------------

EntryElement:   Group
Based on:       Statement
Description:    "A set of one or more statements and subgroups that should be interpreted together, or may be convenient to consider collectively."
ContextCode is SCT#424975005 "Record Entity"
1..1            GroupTypeCode
0..*            Statement
0..*			Group

		Element:	GroupTypeCode
		Description:	"A code that describes the type of composition or group, such as a section or document type identifier."
		Value:		CodeableConcept

// -------------  Entry Metadata -----------------

Element: 		Entry
Concept:		MTH#C1705654
Description:	"Metadata attributes that apply to any item represented in the standard health record. An Entry may not belong exclusively to a single person's health record, but could represent an entity that surfaces in multiple records, such as organizations or practitioners. If the entry belongs to a single person's record, then the identity of the person of record must be recorded."
0..1			ShrId
1..1			EntryId
0..1			Version
1..1			EntryType
1..1    		CreationTime
1..1			LastUpdated
0..1			Narrative
0..1			Language
0..*			SecurityLabel
0..*			Tag
0..*			DerivedFrom
				Version value is type id

	Element:		ShrId
	Concept:		TBD
	Description:	"A unique, persistent, permanent identifier for the overall health record belonging to the PersonOfRecord."
	Value:			id
	
	Element:    	EntryId
	Concept:        MTH#C0600091
	Description:    "A persistent, permanent identifier for an entry in a health record, unique within the scope of the health record."
	Value:          id
	
	Element:		EntryType  // Would EntryClass be clearer?
	Concept:		TBD
	Description:	"SHR data element identifier, as a URI."
	Value:			uri

	Element: 		LastUpdated
	Concept:		TBD
	Description:	"The most recent date the entry was changed."
	Value:			instant

	Element:		Narrative
	Concept:		TBD
	Description:	"A human-readable narrative, potentially including images, that contains a summary of the resource, and may be used to represent the content of the resource to a human."
	Value:			xhtml
	1..1			NarrativeQualifier

			Element:		NarrativeQualifier
			Concept:		TBD
			Description:	"Additional information on how the narrative was generated, and the scope of information contained."
			Value:			code from http://hl7.org/fhir/ValueSet/narrative-status
	
	Element:		SecurityLabel
	Concept:		TBD
	Description:	"A code that connects the entry to a security policy. Security labels can be updated when the resource changes, or whenever the security sub-system chooses to."
	Value:			Coding
	
	Element:		Tag
	Concept:		TBD
	Description:	"A code used to relate entries to categories or workflows. Applications are not required to consider the tags when interpreting the meaning of an entry."
	Value:			Coding
	
	Element:		DerivedFrom
	Concept:		TBD
	Description:	"Indicates the source of information in the case the Entry has been created by logical extension or modification of one or more source entries."
	Value:			ref(Statement)

	Element:		Version
	Concept:		MTH#C0333052
	Description:	"A number or code associated with the product that identifies a particular release iteration."
	Value:			string or id