Grammar:			DataElement 5.0
Namespace:			shr.context
Description:		"The Context Core Package defines the high-level clinical statement context classes. Three types of contexts are currently defined in CIMI: (1) Finding Contexts, (2) Action Contexts, and (3) Event Contexts. Finding contexts are used to specify whether a finding was observed to be present or absent. Action contexts are used to specify whether a clinical activity was performed, ordered, planned, or perhaps not performed."
Uses:				shr.core, shr.demographics, shr.actor, shr.encounter, shr.device, shr.observation, shr.base


//-------------  ActionContext and Children -----------//


Element:		ActionContext
Based on:		Context
Concept:		TBD
Description:	"A deed or endeavor; an action taken to address a undesired health state, behavior, risk, or goal. An action can have various contexts: definitional, performed/not performed, requested/not requested, recommended/not recommended."
1..1			SpecificType from ActionContextTypeVS
0..*			Reason
//1..1			Status  REMOVED - not all contexts have a status, especially the non-x contexts


Element:		PerformedContext
Based on:		ActionContext
Concept:		TBD
Description:	"Context indicating actual performance or execution of a healthcare-related action, e.g., 3rd dose of Hepatitis B vaccine administered on Dec 4th 2012, appendectomy performed today."
				SpecificType is #performed
0..1			OccurrenceTime  // when the action took place
0..*			Participant
1..1			Status should be from http://hl7.org/fhir/ValueSet/event-status   // overridden in GoalPursued
0..1			Method
0..*			Annotation
0..1			RelatedRequest
0..1			RelatedPlan
0..*			Outcome  // e.g., EvaluationResult

		Element:		Status
		Concept:		MTH#C0449438
		Description:	"The position of affairs at a particular time"
		Value:			code or Coding or CodeableConcept
	
		Element:		Method
		Concept:		TBD
		Description:	"The technique used to carry out an action, for example, the specific imaging technical or assessment vehicle."
		Value:			CodeableConcept

		Element:		RelatedRequest
		Concept:		TBD
		Description:	"The request that this action fulfills"
		Value:			ref(RequestedStatement)

		Element:		RelatedPlan
		Concept:		TBD
		Description:	"The plan that this action fulfills"
		Value:			ref(PlannedStatement)
		
		Element:		Outcome
		Concept:		TBD
		Description:	"The result of performing this action."
		Value:			ref(ClinicalStatement)  // e.g., an observation, condition, adverse event, etc., so leave quite open		

		
Element:		NotPerformedContext
Based on:		ActionContext
Concept:		TBD
Description:	"A record that a clinical act was not performed or never initiated, particularly when there might be an expectation of performing such an act, for example, if a vaccination is not given because of parental objection. Do not use this context if the act was initiated or started but aborted or cancelled."
1..1			SpecificType is #not_performed
0..*			Reason
0..1			RelatedRequest
0..1			RelatedPlan


Element:		PlannedContext
Based on:		ActionContext
Concept:		TBD
Description:	"Context indicating intended future performance or execution of a healthcare-related action, e.g., 3rd dose of Hepatitis B vaccine to be administered three months hence."
				SpecificType is #planned
0..1			ExpectedPerformanceTime
0..1			ExpectedPerformer
0..1			ExpectedPerformerType
1..1			Status should be from http://hl7.org/fhir/ValueSet/event-status
0..1			Method
0..*			Annotation


			
Element:		RequestedContext
Concept:		MTH#C1705178
Based on:		ActionContext
Description:	"An order for something to take place."
1..1			SpecificType is #requested
1..1			Status should be from http://hl7.org/fhir/ValueSet/request-status // orders with 'draft' or 'entered in error' status do not appear in the SHR
0..1			ExpectedPerformanceTime
0..1			ExpectedPerformer
0..1			ExpectedPerformerType
0..1 			Priority should be from http://hl7.org/fhir/ValueSet/request-priority
0..1			PerformerInstructions
0..1			PatientInstructions	
0..1			CommunicationMethod
		
		Element:		ExpectedPerformanceTime
		Concept:		TBD
		Description:	"When an action should be done. If the action is a series or recurs (e.g. daily blood sugar testing in the morning) then a Timing can be used to describe the periodicity."
		Value:			dateTime or date or TimePeriod or TBD "Timing"

		Element:		ExpectedPerformerType
		Concept:		TBD
		Description:	"What type of actor should carry out the testing."
		Value:			CodeableConcept // WHAT ValueSet??

		Element:		ExpectedPerformer
		Concept:		TBD
		Description:	"Who should carry out the tests. For example, the patient or caregiver."
		Value:			Person or Organization

		Element:		PerformerInstructions
		Concept:		TBD
		Description:	"Information for the performer of the test, if needed."
		Value:			string

		Element:		PatientInstructions
		Concept:		TBD
		Description:	"Information for the patient, such as, where to get the test, how to prepare for the test, etc."
		Value:			string
		
		Element:		CommunicationMethod
		Concept:		TBD
		Description:	"This is the method the provider used to communicate. Examples include: Written, Telephoned, Verbal, Electronically Entered, Policy, Service Correction, Duplicate, etc. 'Code indicating the origin of the prescription.' - NCPDP Telecommunication (Field 419-DJ, Data Dictionary 201104). Possible values include: Written; Telephone; Electronic; Facsimile; Pharmacy; Not Known."
		Value:			CodeableConcept

Element:		NotRequestedContext
Concept:		TBD
Based on:		ActionContext
1..1			SpecificType is #not_requested

		
Element:		ProposedContext
Concept:		TBD
Based on:		ActionContext
Description:	"An offer or a suggestion to perform a healthcare act. A recommendation to a provider is an example of proposal made by a CDS system. A proposal must be accepted by an entity in order for it to be performed."
1..1			SpecificType is #proposed
1..1			Status from ProposedStatusVS
0..1			ExpectedPerformanceTime
0..1			ExpectedPerformer
0..1			ExpectedPerformerType
0..1 			Priority from http://hl7.org/fhir/ValueSet/request-priority
0..1			PerformerInstructions
0..1			PatientInstructions	


Element:		ProposedAgainstContext
Concept:		TBD
Based on:		ActionContext
Description:	"Concept represents a recommendation from a clinical decision support system or advice from a consultation to not perform an act."		
1..1			SpecificType is #proposed_against		


Element:		PromisedContext
Concept:		TBD
Based on:		ActionContext
Description:	"Concept represents a recommendation from a clinical decision support system or advice from a consultation to not perform an act."		
1..1			SpecificType is #promised
// TODO: Who promised, promised time, etc.

Abstract Element:	PerformedStatement
Based on:			ClinicalStatement
					Context is type PerformedContext
					
Abstract Element:	NotPerformedStatement
Based on:			ClinicalStatement
					Context is type NotPerformedContext

Abstract Element:	RequestedStatement
Based on:			ClinicalStatement
					Context is type RequestedContext

Abstract Element:	NotRequestedStatement
Based on:			ClinicalStatement
					Context is type NotRequestedContext
					
Abstract Element:	PlannedStatement
Based on:			ClinicalStatement
					Context is type PlannedContext					
					
Abstract Element:	ProposedStatement
Based on:			ClinicalStatement
					Context is type ProposedContext					

Abstract Element:	ProposedAgainstStatement
Based on:			ClinicalStatement
					Context is type ProposedAgainstContext

Abstract Element:	PromisedStatement
Based on:			ClinicalStatement
					Context is type PromisedContext
				

		// ------------   Modifiers  -----------------------

Element:		NonOccurrenceModifier 
Concept:		TBD
Description:	"When true, indicates either that the event or action documented in the entry did not occur. For example, if immunization is not given, the NonOccurrenceModifier=true will indicate this.
When applied to a recommendation, the modifier indicates the action mentioned in the topic should not take place. For example, a request to NOT elevate the head of a bed using the code for elevating the bed, and setting ProhibitedModifier to true. Other examples include do not ambulate, do not flush NG tube, do not take blood pressure on a certain arm, etc. If the Context contains negation and ProhibitedModifier is true, that will reinforce the prohibition, and should not be interpreted as a double negative that equals a positive."
Value:			boolean
0..1			Reason   // The reason that an event or action did not occur


Element:		AssertionNegationModifier
Concept:		TBD
Description:	"When true, this modifier indicates that the associated observation, assessment, or finding is false, the condition is absent. For example, if the assessment is 'allergy to peanuts' and the AssertionNegationModifier is true, it means the subject does not have an allergy to peanuts."
Value:			boolean