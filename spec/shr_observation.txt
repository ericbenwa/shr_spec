Grammar:		DataElement 5.0
Namespace:		shr.observation
Description:	"The SHR Observation domain contains basic definitions used to capture subjective and objective information about the subject."
Uses:			shr.base, shr.core, shr.demographics, shr.actor, shr.lab, shr.medication, shr.condition, shr.procedure, shr.device

EntryElement: 	Observation
Based on:		Finding
Concept:		MTH#C1554188
Description:	"An observation includes any information about a subject that results from an act of observing, measuring, or evaluation. The topic of an observation can include the subject's identity, behavior, physiological state, health state, functional status, environment, exposures, etc. The method of observing can vary widely, from questioning, physical examination, formal assessment vehicles, laboratory tests, imaging procedures, etc. Patient-reported information is also considered an observation, where subject and observer are the same individual."
// TODO: Support additional value types: SampledData or Attachment 
1..1			ResultStatus from http://hl7.org/fhir/ValueSet/observation-status
0..1			BodySite
0..1			ref(Specimen)
0..1			ref(Device) 
0..*			ObservationQualifier   //  = CIMI's Precondition
0..*			ReferenceRange  // quantitative measurement only
0..1			Interpretation   // might move up to Finding itself
0..1			ChangeFlag
0..1			Components

		Element:		ResultStatus
		Concept:		TBD
		Description:	"Labels the result as preliminary, amended, final, etc."
		Value:			CodeableConcept from ObservationCategoryVS if covered

		Element:		Interpretation
		Concept:		MTH#C0420833
		Description:	"A clinical interpretation of a measurement."
		Value:			CodeableConcept from http://hl7.org/fhir/ValueSet/observation-interpretation 

		Element:		ChangeFlag
		Concept:		MTH#C1705241
		Description:	"Indicator of significant change (delta) from the last or previous measurement."
		Value:			CodeableConcept from ChangeFlagVS

		Element:		ObservationQualifier
		Concept:		MTH#C1443279
		Description:	"A description of the conditions or context of an observation, for example, under sedation, fasting or post-exercise. Body position and body site are also qualifiers, but handled separately. A qualifier cannot modify the measurement type; for example, a fasting blood sugar is still a blood sugar."
		Value:			CodeableConcept


		Element:		DataAbsentReason
		Concept:		TBD
		Description:	"Provides a reason why the value of the observation is missing, if it is expected (some observations are not expected to have a value)."
		Value:			CodeableConcept from DataAbsentReasonVS

		Element:		ReferenceRange
		Concept:		MTH#C0883335
		Description:	"The usual or acceptable range for a test result."
		Value:			Range   // TODO: align this with FHIR

		Element:		Components
		Concept:		TBD
		Description:	"Observation Components are parts of the parent observation. Component observations share the same attributes (such as Specimen) as the primary observation and are not separable. However, the reference range may be different for each component observation."
		Value:			0..* ObservationComponent
		

Element:		ObservationComponent
Description:	"A simplified, non-separable observation consisting of a type code, value (or data absent reason), reference range, and interpretation."
Value:			0..1 (Quantity or CodeableConcept or string or boolean or Range or Ratio or time or dateTime or TimePeriod)
1..1			ObservedAttribute
0..1			DataAbsentReason
0..1			Interpretation
0..*			ReferenceRange


EntryElement:	Panel
Concept:		TBD
Based on:		Finding
Description:	"A grouped set of related findings, frequently captured at the same time. An example is a complete blood count (CBC), with separate observations for hemoglobin, hematocrit, etc. Could represent the content of a diagnostic report, such as a pathology report. Typically the Category and Reason are not given for individual findings that are part of the panel, but rather given at the level of the panel itself. The panel and all its sub-observations share the same metadata (provenance)."
// 0..0			Value
// TODO: cannot constrain the cardinality of Value
// 	 ERROR shr: Failed to resolve definition for Value. (module=shr-text-input)
//   file: C:\Users\mkramer\Documents\GitHub\shr_spec\spec\shr_observation.txt
0..0			DataAbsentReason
1..1			PanelMembers

		Element:		PanelMembers
		Concept:		TBD
		Description:	"PanelMembers represent the elements of a group of a related observations. Examples are the measurements that compose a complete blood count (CBC), or the elements of a pathology report. Each member is an independent observation, but the grouping reflects a composite lab order, shared specimen, or a single report author."
		Value:			0..* ref(Finding)


EntryElement:	BodyStructureObservation
Concept:		MTH#C1268086
Description:	"Observation of the existence (or non-existence) distinct anatomical or pathological morphological feature or organizational pattern, acquired or innate. Examples include tissue types, tumors, and wounds. The observation has a body site that allows the the structure to be located in the body. The observation identifier allows other observations of the same body structure to be related to QualitativeValueScaleVSthis observation and tracked over time."
Based on:		Observation
Value:			CodeableConcept from BodyStructureVS

Element:		SocialHistory
Concept:		MTH#C3714536
Based on:		Observation
Description:	"The external elements and conditions which surround, influence, and affect the life and development of the subject. Includes social conditions such as poverty, violence, bullying."
1..1			FindingStatus from FindingStatusVS
				Category is #social-history "social history"


/* Orphans

		Element:		ServiceCategory
		Concept:		TBD
		Description:	"A code that classifies the clinical discipline, department or diagnostic service that created the report (e.g. cardiology, biochemistry, hematology, MRI). This is used for searching, sorting and display purposes."
		Value:			CodeableConcept

		Element:		ReportStatus
		Concept:		TBD
		Description:	"The status of the report associated with this panel."
		Value:			code from http://hl7.org/fhir/ValueSet/diagnostic-report-status
		
*/