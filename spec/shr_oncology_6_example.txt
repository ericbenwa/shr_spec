Grammar:		DataElement 6.0
Namespace:		oncology
Description:	"SHR implementation of oncology data elements."
Uses:  			shr.core, shr.base, shr.condition, cimi.core, cimi.element, cimi.context, cimi.topic, cimi.statement, cimi.entity

CodeSystem:   SCT = http://snomed.info/sct
CodeSystem:   LNC = http://loinc.org
CodeSystem:		MTH = http://ncimeta.nci.nih.gov
CodeSystem:   UCUM = http://unitsofmeasure.org
CodeSystem:		HGNC = http://www.genenames.org
CodeSystem:		CAP = https://sdt.cap.org
CodeSystem:		OBSCAT = http://hl7.org/fhir/observation-category
CodeSystem:		HL7V20074 = http://hl7.org/fhir/v2/0074

Entry:	        BreastSite
Based on:		AnatomicalLocation   // change keyword to Parent? (no real reason...)
Description:	"A body site specific to the breast structure."
// Option: since 0..1 is common, should it be the default?
Value:          conceptCode from BreastSiteVS (required)  // break out VS constraint?
Property:       0..1 ClockDirection
Property:       0..1 DistanceFromBreastSiteToNipple
Forbid:         AnatomicalDirection

		Element:		DistanceFromBreastSiteToNipple
		Description:	"Distance between the feature of interest (e.g., the tumor) and the nipple."
		Value:          0..1 Quantity with units UCUM#cm

Entry:	        BreastSpecimen
Based on:		Specimen
Description:	"Specimen resulting from biopsy or excision of breast and surrounding tissue."
Property:    0..* TumorIdentifier 
Property:    0..1 ColdIschemiaTime
Constraint:  Type from BreastSpecimenTypeVS
Constraint:  CollectionSite.Value is type BreastSite
Constraint:  CollectionMethod from BreastSpecimenCollectionMethodVS (required)
Constraint:  SourceSpecimen.Value is type BreastSpecimen

		Element:	 	ColdIschemiaTime
		Concept:		        LNC#44778-9 "Cold ischemic time {Organ}"
        //  rethinking Concept -- is it the entire element, or the question code? is that needed?
		Description:	"The time period between the chilling of a tissue or tissue sample and the time it is warmed...."
		Value:          TimePeriod

EntryElement:	BreastCancerPresenceStatement
Based on:		ConditionPresenceStatement
Concept:		SCT#126926005 "Neoplasm of breast (disorder)"  ??
Description:	"Diagnosis of cancer originating in the tissues of the breast, and potentially spread to other organs of the body."
Property:       0..1 MorphologyBehavior
Constraint:     MorphologyBehavior from MorphologyBehaviorVS  // implicitly the value
Constraint:     ConditionAssertionTopic.TopicCode from BreastCarcinomaHistologicTypeVS
Forbid:         ConditionAssertionTopic.Media  // stronger language "forbid"
Forbid:         ConditionAssertionTopic.AlleviatingFactor
Forbid:         ConditionAssertionTopic.ExacerbatingFactor
Constraint:		ConditionPresenceContext.Stage.StageDetail.Value is type BreastCancerStage
Forbid:         ConditionPresenceContext.Severity
Constraint:     ConditionAssertionTopic.FindingMethod from BreastCancerDetectionVS (preferred)
Constraint:     ConditionAssertionTopic.AnatomicalLocation substitute BreastSite

			Element:		MorphologyBehavior
			Concept:		SCT#246463000 "Behavior of tumor (attribute)"
			Description:	"A description of the morphology and behavioral characteristics of the cancer."
			Value:          conceptCode

Entry:	        BreastTumor
Based on:		FindingSiteConditionPresenceStatement
Concept:		SCT#395557000 "Tumor finding (finding)"
Description:	"An abnormal mass of tissue that results when cells divide more than they should or do not die when they should. Tumors may be benign (not cancer), or malignant (cancer). Also called neoplasm. (source: NCI)"
Constraint:		TopicCode = SCT#395557000 "Tumor finding (finding)"
Constraint:		Category = OBSCAT#exam  // includes?  (Category is 0..*)
Constraint:		FindingSiteConditionTopic.AnatomicalLocation substitute BreastSite
Forbid:         FindingSiteConditionTopic.AlleviatingFactor
Forbid:         FindingSiteConditionTopic.ExacerbatingFactor
Constraint:		FindingSiteConditionTopic.FindingSiteIdentifier substitute TumorIdentifier
Forbid:         ConditionPresenceContext.Severity
Constraint:		FindingSiteConditionTopic.FindingMethod from BreastCancerDetectionVS (preferred)
Forbid:         ConditionPresenceContext.Stage

		Element:		TumorIdentifier
		Based on:		FindingSiteIdentifier
		Description:	"A human-readable identifier for the lesion; e.g., a letter or integer."

// We need to add an example to the IG!
// Perhaps move timing prefix to component
// Do we want to follow Travis' approach of putting the Cancer Staging Encounter Phase in Encounter?
Element:		BreastCancerStageTopic
Based on:		ObservationTopic
Description:	"The topic class for describing a breast cancer staging observation."
Property:       0..1 StageTimingPrefix
Constraint:     TopicCode = MTH#C2216702 "Malignant Neoplasm of Breast Staging"
Forbid:         FindingMethod
Forbid:         EvaluationComponent
Forbid:         Media
Forbid:         AnatomicalLocation
Forbid:         Device
Forbid:         Specimen
Forbid:         Precondition
Forbid:         ReferenceRange
Populate:       PanelMembers.Observation
    0..1 BreastCancerPrimaryTumorClassification
    0..1 BreastCancerPrimaryTumorClassification
    0..1 BreastCancerRegionalNodesClassification
    0..1 BreastCancerDistantMetastasesClassification
    0..1 HER2ReceptorStatus
    0..1 EstrogenReceptorStatus
    0..1 ProgesteroneReceptorStatus
    0..1 DCISNuclearGrade
    0..1 BreastCancerHistologicGrade

		Element:		StageTimingPrefix
		Concept:		SCT#260869008 "Timing of stage"
		Description:	"Indicates when the staging was done, in terms of treatment landmarks."
		Value:          conceptCode from StageTimingPrefixVS (required)

	Entry:	        BreastCancerPrimaryTumorClassification
	Based on:		Observation
	Concept:		SCT#78873005 "T category"
	Description:	"The size and extent of the primary tumor, based on criteria defined by the staging system being used."
    Property:       0..1 TumorIdentifier  // optionally identifies the tumor considered to be primary
	Constraint:		ObservationContext.ResultValue.Value is type conceptCode
	Constraint:		ObservationTopic.Category = OBSCAT#exam
	Constraint:		ObservationTopic.TopicCode = SCT#78873005 "T category"
	Constraint:		ObservationTopic.AnatomicalLocation substitute BreastSite
	Forbid:         ObservationTopic.Precondition   // just suggesting 
	Forbid:         ObservationTopic.FindingMethod
	Forbid:         ObservationTopic.Media
	Forbid:         ObservationTopic.Device
	Forbid:         ObservationTopic.ReferenceRange
	Populate:		ObservationTopic.EvaluationComponent
                    0..1	StageSuffix
	Populate:   	ObservationTopic.PanelMembers.Observation
	                0..1	TumorDimensions
                    0..1	TumorMargins

	    Element:   		StageSuffix
		Based on:       CodedEvaluationComponent
		Concept:        MTH#C1550721 "suffix"
		Description:    "A suffix used in conjuction with certain cancer stages, based on criteria defined by the staging system being used."
		Value:          conceptCode

		Element: 		TumorDimensions
		Based on:		LaboratoryObservation
		Concept:		SCT#399375005 "Tumor size finding (finding)"
		Description:	"Dimension size of the tumor sample evaluated for staging.  Dimensions include a size measurements for the longest diameter and the short axis (per RECIST guidelines) as well as margin measurements. "
        Property:       1..1 TumorIdentifier
		Constraint:     LaboratoryObservationTopic.TopicCode = SCT#263605001 "Tumor size finding (finding)"
		Constraint:     LaboratoryObservationTopic.DiagnosticService = HL7V20074#PAT
        Populate:       LaboratoryObservationTopic.EvaluationComponent
	                    0..1 SizeOfLongestDiameter
	                    0..1 SizeOfShortAxis
	                    0..1 SizeOfGrossTumorBed
        Forbid:         LaboratoryObservationTopic.Precondition
        Forbid:         ObservationContext.ResultValue
		Forbid:         ObservationContext.ExceptionValue
		Forbid:         ReferenceRange
		Forbid:         LaboratoryObservationTopic.PanelMembers // mk 8/9/18 removed .Observation to make sure related goes away altogether

				Element:		SizeOfLongestDiameter
				Description:	"Measurements for the primary tumor size which includes the longest diameter of the primary tumor and the longest perpendicular diameter of the primary tumor."
				Based on:		EvaluationComponent
				Concept:		MTH#C0552406 "Longest Diameter"
				Constraint:     Value type Quantity with units UCUM#mm  // restricting the inherited Value attribute as opposed to defining the value!!
				Forbid:         ReferenceRange // no limits here.

				Element:		SizeOfShortAxis
				Description:	"Measurements for the primary tumor size which includes the longest diameter of the primary tumor and the longest perpendicular diameter of the primary tumor."
				Based on:		EvaluationComponent
				Concept:		SCT#103340004 "Short axis (qualifier value)"
				Constraint:     Value type Quantity with units UCUM#mm
				Forbid:         ReferenceRange // no limits here.

				Element:		SizeOfGrossTumorBed
				Based on:		EvaluationComponent
				Concept:		TBD			// mlt_to_rmb: needs new LOINC and SNOMED concept.
				Description:	"The largest dimension of the gross tumor bed and surrounding fibrotic area."
				Constraint:     Value type Quantity with units UCUM#mm
				Forbid:         ReferenceRange // no limits here.

        Element: 		TumorMargins
		Based on:		CodedLaboratoryObservation
		Concept:		LNC#44669-0 "Margin involvement in Breast tumor"
		Description:	"The edge or border of the tissue removed in cancer surgery. The margin is described as negative or clean when the pathologist finds no cancer cells at the edge of the tissue, suggesting that all of the cancer has been removed. The margin is described as positive or involved when the pathologist finds cancer cells at the edge of the tissue, suggesting that all of the cancer has not been removed."
		Constraint:     ObservationContext.ResultValue from http://loinc.org/vs/LL4350-6
		Forbid:         ObservationContext.ExceptionValue
		Constraint: 	LaboratoryObservationTopic.TopicCode = SCT#371488000 "Status of margin involvement by tumor (observable entity)"
		Forbid:         LaboratoryObservationTopic.FindingMethod
		Forbid:         LaboratoryObservationTopic.Precondition
		Constraint: 	LaboratoryObservationTopic.Specimen substitute BreastSpecimen
		Forbid:         LaboratoryObservationTopic.Device
		Forbid:         LaboratoryObservationTopic.Media
		Populate:   	LaboratoryObservationTopic.EvaluationComponent
		                0..1 TumorMarginDescription
		Forbid:         LaboratoryObservationTopic.PanelMembers  // mk 8/9/18 removed .Observation to make sure related goes away altogether


        		Element:		TumorMarginDescription
				Concept:		TBD
				Based on:		CodedEvaluationComponent
				Description:	"Description of the edge or border of tumor in situ by radiologist or of removed tumor by pathologist."
				Constraint:     Value type conceptCode from TumorMarginDescriptionVS
    
    
    Entry:	        BreastCancerRegionalNodesClassification
	Based on:		Observation
	Concept:		SCT#277206009 "N category"
	Description:	"The presence of metastases in regional lymph nodes, based on criteria defined by the staging system being used."
	Constraint: 	ObservationContext.ResultValue.Value is type conceptCode
	// no-op?		ObservationContext.ResultValue.conceptCode
	Forbid:         ObservationTopic.ReferenceRange
	Constraint:     ObservationTopic.Category = OBSCAT#exam
	Constraint:     ObservationTopic.TopicCode = SCT#277206009 "N category"
	Forbid:         ObservationTopic.Precondition
	Forbid:         ObservationTopic.FindingMethod
	Forbid:         ObservationTopic.Media
	Forbid:         ObservationTopic.Device
	Forbid:         ObservationTopic.ReferenceRange
	Forbid:         ObservationTopic.AnatomicalLocation // moved to level of Clinical and Path lymph node involvement
	Forbid:         ObservationTopic.Specimen  // mlt: moved to level of Clinical and Path lymph node involvement
	Populate:   	ObservationTopic.EvaluationComponent
	                0..1 StageSuffix
	Populate:		ObservationTopic.PanelMembers.Observation
	                0..* BreastPathologicalLymphNodeInvolvement
	                0..* BreastClinicalLymphNodeInvolvement


Entry:	        BreastPathologicalLymphNodeInvolvement
Based on:		LaboratoryObservation
Concept:		MTH#C0806692 "Lymph Node Involvement"
Description:	"Clinical assessment of lymph nodes for presence of cancer cells in staging the N category in cancers."
Forbid:         ObservationContext.ResultValue
Forbid:         ObservationContext.ExceptionValue
Constraint:		LaboratoryObservationTopic.TopicCode = SCT#399656008 "Status of tumor metastasis to regional lymph nodes (observable entity)"
Constraint:		LaboratoryObservationTopic.DiagnosticService = HL7V20074#PAT
Forbid:         LaboratoryObservationTopic.FindingMethod
Forbid:         LaboratoryObservationTopic.Precondition
Populate:		LaboratoryObservationTopic.EvaluationComponent
                0..1 	BreastLymphNodeInvolvement
                0..1	LymphNodeSamplingMethod
                0..1	TotalNumberOfLymphNodesExamined
                0..1	NumberOfRegionalLymphNodes
                0..1	NumberOfSentinelLymphNodes
                0..1	NumberOfLymphNodesWithIsolatedTumorCells
                0..1	NumberOfLymphNodesWithMicrometastases
                0..1	NumberOfLymphNodesWithMacrometastases
                0..1	ExtraCapsularExtensionOfNodalTumorStatus
Forbid:         LaboratoryObservationTopic.PanelMembers

Entry:	        BreastLymphNodeBodySite
Based on:		AnatomicalLocation
Description:	"A body site specific to the lymph node structure."
Constraint:     Value from BreastLymphNodeGroupVS (extensible)
Constraint:     Laterality from http://hl7.org/fhir/ValueSet/bodysite-laterality  // actually redundant with base definition
//0..1            AnatomicalDirection  --- also redundant with base definition

		Element:   		BreastLymphNodeInvolvement
		Based on:       CodedEvaluationComponent
		Concept:        SCT#399656008 "Status of tumor metastasis to regional lymph nodes (observable entity)"
		Description:    "Identification of whether tumor cells have extended to the lymph nodes. Formerly known as BreastNodeInvolvementValues"
		Constraint:     Value from LymphNodeInvolvementVS  // already constrained to coding

		Element:   		LymphNodeSamplingMethod
		Based on:       CodedEvaluationComponent
		Concept:        SCT#118890000 "Procedure on lymph node (procedure)"
		Description:    "The procedure method used to obtain the specimen analyzed for the pathological lymph node involvement."
		Constraint:     Value from LymphNodeSamplingMethodVS

		Element:		TotalNumberOfLymphNodesExamined
		Based on:		EvaluationComponent
		Concept:		SCT#444025001 "Number of lymph nodes examined (observable entity)"
		Description:	"Total number of lymph nodes examined for the presence of cancer cells"
	    Constraint:     Value is type IntegerQuantity

		Element:		NumberOfRegionalLymphNodes
		Based on:		EvaluationComponent
		Concept:		LNC#21894-1 "Regional lymph nodes examined [#] Specimen"
		Description:	"Number of regional lymph nodes examined for the presence of cancer cells"
	    Constraint:     Value is type IntegerQuantity

		Element:		NumberOfSentinelLymphNodes
		Based on:		EvaluationComponent
		Concept:		LNC#85347-3 "Sentinel lymph nodes examined [#] in Cancer specimen by Light microscopy"
		Description:	"Number of sentinel lymph nodes examined for the presence of cancer cells"
	    Constraint:     Value is type IntegerQuantity

		Element:		NumberOfLymphNodesWithIsolatedTumorCells
		Based on:		EvaluationComponent
		Concept:		LNC#85352-3 "Lymph nodes with isolated tumor cells [#] in Cancer specimen by Light microscopy"
		Description:	"Number of lymph nodes with isolated metatstatic tumor cells examined for the presence of cancer cells"
	    Constraint:     Value is type IntegerQuantity

		Element:		NumberOfLymphNodesWithMicrometastases
		Based on:		EvaluationComponent
		Concept:		LNC#85344-0 "Lymph nodes with micrometastases [#] in Cancer specimen by Light microscopy"
		Description:	"Number of lymph nodes with micrometastases examined"
		Constraint:     Value is type IntegerQuantity

		Element:		NumberOfLymphNodesWithMacrometastases
		Based on:		EvaluationComponent
		Concept:		LNC#85343-2 "Lymph nodes with macrometastases [#] in Cancer specimen by Light microscopy"
		Description:	"Number of lymph nodes with macrometastases examined"
		Constraint:     Value is type IntegerQuantity

		Element:		ExtraCapsularExtensionOfNodalTumorStatus
		Based on:		EvaluationComponent  // should be CodedEvaluationComponent?
		Concept:		LNC#85350-7 "Extranodal extension of carcinoma [Presence] in Cancer specimen by Light microscopy"
		Description:	"Status for presence of extranodal extension of carcinoma where extranodal extension is the perforation of a cancer through the capsule of a lymph node into the tissue surrounding the node."
		Constraint:     Value is type conceptCode 
        Constraint:     Value from http://loinc.org/vs/LL748-5 (preferred) // mlt: LL748-5 missing one term from original VS (indeterminate)
		Forbid:         ReferenceRange

Entry:	        BreastClinicalLymphNodeInvolvement
Based on:		ComponentOnlyNonLaboratoryObservation
Concept:		MTH#C0806692 "Lymph Node Involvement"
Description:	"Clinical assessment of lymph nodes for presence of cancer cells in staging the N category in cancers."
Constraint:		ObservationTopic.TopicCode = MTH#C0806692 "Lymph Node Involvement"
Constraint:		ObservationTopic.AnatomicalLocation substitute BreastLymphNodeBodySite
Constraint:		ObservationTopic.FindingMethod from LymphNodeClinicalMethodVS (extensible)
Forbid:         ObservationTopic.Precondition
Forbid:         ObservationTopic.Specimen
Forbid:         ObservationTopic.Media
Populate:		ObservationTopic.EvaluationComponent
                0..1 LymphNodeMobility
                0..1 LymphNodeSize

Element:   		LymphNodeMobility
Based on:       CodedEvaluationComponent
Concept:        MTH#C1112395
Description:    "Lymph node palpable"
Constraint:     Value from LymphNodeMobilityVS

Element:		LymphNodeSize
Based on:		EvaluationComponent
Concept:		SCT#364109001 "Size of lymph node (observable entity)"
Description:	"Size of the lymph node or lymph node group which is being clinically assessed."
Constraint:     Value is type Quantity with units UCUM#mm


/* MLT_TO_DO: add in relationships to Met location and FindingMethod since both evaluate M category values.*/
	EntryElement:	BreastCancerDistantMetastasesClassification
	Based on:		Observation
	Concept:		SCT#277208005 "M category (observable entity)"
	Description:	"The presence of distant metastases, based on criteria defined by the staging system being used."
    Property:       0..* TumorIdentifier  // possibly based on one or more identified tumors
	Constraint:     ObservationContext.ResultValue.Value is type conceptCode
	// ??			ObservationContext.ResultValue.conceptCode
	Constraint:     ObservationTopic.Category = OBSCAT#exam
	Constraint:     ObservationTopic.TopicCode = SCT#277208005 "M category (observable entity)"
	Forbid:         ObservationTopic.Precondition
	Constraint:     ObservationTopic.FindingMethod from BreastCancerDetectionVS
	Forbid:         ObservationTopic.Media
	Forbid:         ObservationTopic.Device
	Forbid:         ObservationTopic.ReferenceRange
	Populate: 		ObservationTopic.EvaluationComponent
	                0..1 StageSuffix
	Forbid:         ObservationTopic.PanelMembers  // mk- removed panel members altogether, not just PanelMembers.Observation 8/9/18

Entry:	        BreastCancerStage
Based on:		Observation
Concept:		MTH#C2216702 "Malignant Neoplasm of Breast Staging" //Not LNC#21908-9 since that is AJCC-specific and also not breast cancer specific. We do however, give the LOINC list of stage values as the preferred codes.
Description:	"The stage of a breast cancer. Different staging systems use different staging groups, so there are currently no terminology bindings associated with this class."
Constraint:     ObservationTopic substitute BreastCancerStageTopic
Constraint:     ObservationContext.ResultValue.Value is type conceptCode
Constraint:     ObservationContext.ResultValue from http://loinc.org/vs/LL240-3 (preferred)


Entry:	        DCISNuclearGrade
Concept:		TBD#TBD "Nuclear Grade"  // TODO: request LOINC code for DCIS nuclear grade (no DCIS-specific code available and DCISNuclearGradeVS specifically references DCIS)
Based on: 		SimpleCodedLaboratoryObservation
Description:	"An evaluation of the size and shape of the nucleus in tumor cells and the percentage of tumor cells that are in the process of dividing or growing. Cancers with low nuclear grade grow and spread less quickly than cancers with high nuclear grade. In breast cancer, nuclear grade is typically evaluated for ductal carcinoma in situ (DCIS) only. There is currently no concept code for DCIS Nuclear Grade in LOINC, SNOMED, or NCI Metathesaurus."
Constraint:     ObservationContext.ResultValue.Value is type conceptCode
Constraint:     ObservationContext.ResultValue.conceptCode from DCISNuclearGradeVS
Constraint:     LaboratoryObservationTopic.TopicCode = TBD#TBD
Constraint:     LaboratoryObservationTopic.Specimen substitute BreastSpecimen
Constraint:     LaboratoryObservationTopic.DiagnosticService = HL7V20074#PAT
Forbid:         LaboratoryObservationTopic.Media
Forbid:         LaboratoryObservationTopic.Device

Entry:	        BreastCancerHistologicGrade
Concept:		LNC#44648-4 "Histologic grade [Score] in Breast cancer specimen Qualitative by Nottingham"
Based on:		CodedLaboratoryObservation
Description:	"The Elston Grade/Nottingham Score, representative of the aggressive potential of the tumor. Well differentiated cells (Grade 1) look similar to normal cells and are usually slow growing, while poorly differentiated cells (Grade 3) look very different than normal and are fast-growing."
Constraint:     ObservationContext.ResultValue.Value is type conceptCode
Constraint:     ObservationContext.ResultValue.conceptCode from http://loinc.org/vs/LL4561-8
Constraint:     LaboratoryObservationTopic.TopicCode = LNC#44648-4 "Histologic grade [Score] in Breast cancer specimen Qualitative by Nottingham"
Constraint:     LaboratoryObservationTopic.Specimen substitute BreastSpecimen
Constraint:		LaboratoryObservationTopic.DiagnosticService = HL7V20074#PAT
Forbid:         LaboratoryObservationTopic.Media
Forbid:         LaboratoryObservationTopic.Device
Populate:		LaboratoryObservationTopic.EvaluationComponent
                0..1  TubuleFormationScore
                0..1  NuclearPleomorphismScore
                0..1  MitoticCountScore
Forbid:         LaboratoryObservationTopic.PanelMembers

			Element:		TubuleFormationScore
			Concept:		LNC#85321-8 "Granular differentiation [Score] in Breast cancer specimen Qualitative by Nottingham"
			Based on:		CodedEvaluationComponent
			Description:	"The degree of glandular differentiation or tubule formation in breast carcinoma is one component of the Nottingham histologic grade, which is a prognostic indicator for patients with breast carcinoma. Less aggressive cancers have more tubule formation."
			Constraint:     Value from http://loinc.org/vs/LL4380-3  //TODO: Determine if it is better to use codes as opposed to a number 1, 2 or 3. Observations don't support integer or posInteger

			Element:		NuclearPleomorphismScore
			Concept:		LNC#44645-0 "Nuclear pleomorphism in Breast tumor Qualitative by Nottingham"
			Based on:		CodedEvaluationComponent
			Description:	"The degree of nuclear pleomorphism (variability of nuclei) in breast carcinoma is one component of the Nottingham histologic grade, which is a prognostic indicator for patients with breast carcinoma. Increasing degrees of pleomorphism are associated with increasingly aggressive cancers."
			Constraint:     Value from http://loinc.org/vs/LL4382-9

			Element:		MitoticCountScore
			Concept:		LNC#85300-2 "Mitotic rate [Score] in Breast cancer specimen Qualitative by Nottingham"
			Based on:		CodedEvaluationComponent
			Description:	"The degree of mitotic activity in breast carcinoma is one component of the Nottingham histologic grade, which is a prognostic indicator for patients with breast carcinoma. Mitotic activity is assessed as the number of mitoses per 10 high power fields (HPF), with increasing mitotic activity being an indicator of more aggressive cancer. The specific scores assigned to the number of mitoses depends on the size of the HPF. For example, for a HPF size of 0.274 mm^2, less than 10 mitoses per 10 HPF gets a score of 1, 10-19 gets a score of 2, and greater than or equal to 20 gets a score of 3. When larger or smaller HPFs are used, the cutoffs for the number of mitoses corresponding to a specific score are adjusted according to published guidelines."
			Constraint:     Value from http://loinc.org/vs/LL4383-7

Entry:	        EstrogenReceptorStatus
Based on:		CodedLaboratoryObservation
Concept:		LNC#16112-5 "Estrogen receptor [Interpretation] in Tissue"
Description:	"Estrogen receptor alpha is the predominant estrogen receptor expressed in breast tissue and is overexpressed in around 50% of breast carcinomas. ER status (positive=present or overexpressed; negative=absent) is a factor in determining prognosis and treatment options.
The current approach is that positive/negative designation is a value, even though that value is (in fact) an interpretation of evidence (NuclearPositivity and AverageStainingIntensity)."
Constraint:     ObservationContext.ResultValue.Value is type conceptCode
Constraint:     ObservationContext.ResultValue.conceptCode from PositiveNegativeIndeterminateVS
Constraint:     LaboratoryObservationTopic.TopicCode from EstrogenReceptorInterpretationTestsVS
Constraint:     LaboratoryObservationTopic.DiagnosticService = HL7V20074#PAT
Constraint:     LaboratoryObservationTopic.Specimen substitute BreastSpecimen
Forbid:         LaboratoryObservationTopic.Media
Forbid:         LaboratoryObservationTopic.Device
Populate:       LaboratoryObservationTopic.EvaluationComponent
                0..1 EstrogenReceptorNuclearPositivity
                0..1 EstrogenReceptorAverageStainingIntensity
Forbid:         LaboratoryObservationTopic.PanelMembers
/* additional components from CAP form
includes 0..1	StainingControl
includes 0..1	PrimaryAntibody //from EstrogenAntibodyVS if covered
includes 0..1	AllredProportionScore
includes 0..1	AllredIntensityScore
includes 0..1	AllredTotalScore
includes 0..1	OtherReceptorScoringSystem
*/

    Element:		EstrogenReceptorNuclearPositivity
	Based on:		EvaluationComponent
	Concept:		LNC#14228-1 "Cells.estrogen receptor/​100 cells in Tissue by Immune stain"  // LOINC codes for nuclear positivity are specific to the receptor. TODO: Confirm this code is more appropriate than LNC#85329-1 "Cells.estrogen receptor/​100 cells in Breast cancer specimen by Immune stain", which specifies the specimen as a breast specimen.
	Description:	"The percentage of cells that test (stain) positive for the presence of estrogen receptors. We are seeking feedback on whether nuclear positivity should be an exact percentage or a range of percentages. As currently defined, an exact nuclear positivity could be represented by a zero-width range, where the lower and upper bounds would be the same number."
	Constraint:     Value is type Range
	Forbid:         ReferenceRange

	Element:		EstrogenReceptorAverageStainingIntensity
	Concept:		LNC#85310-1 "Estrogen receptor fluorescence intensity [Type] in Breast cancer specimen by Immune stain" //TODO: request LOINC codes that are not specimen-specific. Also, request answer list is specified in SNOMEDCT.
	Based on:		CodedEvaluationComponent
	Description:	"The degree or magnitude of staining across positively stained tumor cells on the entire tissue section relative to the intensity of positive controls run with the same batch."
	Constraint:     Value from StainingIntensityVS

EntryElement:	ProgesteroneReceptorStatus
Based on:		CodedLaboratoryObservation
Concept:		LNC#16113-3 "Progesterone receptor [Interpretation] in Tissue"
Description:	"Progesterone receptor status is a factor in determining prognosis and treatment options. The value is the percentage of cells that test (stain) positive for the presence of a receptor. The interpretation of positive or negative (found in the interpretation property) is based on the staining percentage, and may take into account the staining intensity.
Based on discussion with Cancer Interoperability Group subject matter experts, there was insufficient rationale to include the following components in the data model: StainingControl, PrimaryAntibody, Allred Score (both total and component scores). We are seeking feedback on whether or not those components should be included in this model."
Constraint:     ObservationContext.ResultValue.Value is type conceptCode
Constraint:     ObservationContext.ResultValue.conceptCode from PositiveNegativeIndeterminateVS
Constraint:     LaboratoryObservationTopic.TopicCode from ProgesteroneReceptorInterpretationTestsVS
Constraint:     LaboratoryObservationTopic.DiagnosticService = HL7V20074#PAT
Constraint:     LaboratoryObservationTopic.Specimen substitute BreastSpecimen
Populate:		LaboratoryObservationTopic.EvaluationComponent
                0..1 ProgesteroneReceptorNuclearPositivity
                0..1 ProgesteroneReceptorAverageStainingIntensity
Forbid:         LaboratoryObservationTopic.PanelMembers


    Element:		ProgesteroneReceptorNuclearPositivity
	Based on:		EvaluationComponent
	Concept:		LNC#14230-7 "Cells.progesterone receptor/​100 cells in Tissue by Immune stain" // LOINC codes for nuclear positivity are specific to the receptor. TODO: Confirm this code is more appropriate than LNC#85325-9 "Cells.progesterone receptor/​100 cells in Breast cancer specimen by Immune stain", which specifies the specimen as a breast specimen.
	Description:	"The percentage of cells that test (stain) positive for the presence of progesterone receptors. We are seeking feedback on whether nuclear positivity should be an exact percentage or a range of percentages. As currently defined, an exact nuclear positivity could be represented by a zero-width range, where the lower and upper bounds would be the same number. We are seeking feedback on whether nuclear positivity should be an exact percentage or a range of percentages. As currently defined, an exact nuclear positivity could be represented by a zero-width range, where the lower and upper bounds would be the same number."
	Constraint:     Value is type Range
	Forbid:         ReferenceRange