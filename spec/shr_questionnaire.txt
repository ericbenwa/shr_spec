Grammar:		DataElement 5.0
Namespace:		shr.core

/*
Abstract Element:   PublishedArtifact
Based on:           DomainResource
Description:    "Abstract class with common elements for information items that are published."
0..1 		    Url
0..1            VersionString
0..1            NameAsText
0..1            Title
1..1            Status from http://hl7.org/fhir/ValueSet/publication-status
0..1            IsExperimental
0..*            SubjectType
0..1            LastUpdated
0..1            PublisherName
0..*            ContactDetail
0..1            DescriptionMarkdown
0..*            UseContext
0..*            Jurisdiction
0..1            PurposeMarkdown
0..1            Copyright
*/

EntryElement:   Questionnaire
Based on:       DomainResource
Description:    "A structured set of questions intended to guide the collection of answers from end-users. Questionnaires provide detailed control over order, presentation, phraseology and grouping to allow coherent, consistent data collection."
0..1 		    Url
0..1            VersionString
0..1            NameAsText
0..1            Title
1..1            Status from http://hl7.org/fhir/ValueSet/publication-status
0..1            IsExperimental
0..*            SubjectType
0..1            LastUpdated
0..1            PublisherName
0..*            ContactDetail
0..1            DescriptionMarkdown
0..*            UseContext
0..*            Jurisdiction
0..1            PurposeMarkdown
0..1            Copyright
0..1            LastReviewedDate
0..1            ApprovalDate
0..1            EffectiveTimePeriod
0..*            Code could be from http://hl7.org/fhir/ValueSet/questionnaire-questions
0..*            QuestionnaireItem

    Element:		IsExperimental						
    Description:	"A Boolean value to indicate that the item is for testing purposes (or education/evaluation/marketing) and is not intended to be used for genuine usage."
    Value:			boolean			

    Element:     SubjectType
    Description: "Resource that can be subject of QuestionnaireResponse"
    Value:      CodeableConcept from http://hl7.org/fhir/ValueSet/resource-types

    Element:		PublisherName
    Description:	"The name of the organization or individual that published this item."
    Value:			string

    Element:    DescriptionMarkdown
    Description:  "A description of the purpose of the item." 
    Value:      markdown

    Element:    UseContext
    Description:    "The content was developed with a focus and intent of supporting the contexts that are listed. These contexts may be general categories (gender, age, ...) or may be references to specific programs (insurance plans, studies, ...) and may be used to assist with indexing and searching for appropriate questionnaire instances."
    1..1        Code
    1..1        ContextValue

        Element:    ContextValue
        Description:    "A value that defines the context specified in this context of use. The interpretation of the value is defined by the code."
        Value:      CodeableConcept or Quantity or Range or ref(ResearchStudy) or ref(Group) or ref(Location) or ref(Organization)  // or PlanDefinition, InsurancePlan, HealthcareSerice

    Element:    PurposeMarkdown
    Description:  "A description of the purpose of the item." 
    Value:      markdown

    Element:    Copyright
    Description:  "A rights statement relating legal restrictions on the use and publishing of the item." 
    Value:      markdown

    Element: 		LastReviewedDate
    Description:	"The most recent date the item was reviewed."
    Value:			date

    Element: 		ApprovalDate
    Description:	"The date on which the item was officiallly deemed acceptable by the publisher."
    Value:			date

    Element:    QuestionnaireItem
    Description:  "Questions and sections within the Questionnaire."
    1..1        IdentifierString
    0..1        DetailsLink
    0..*        Code could be from http://hl7.org/fhir/ValueSet/questionnaire-questions
    0..1        Prefix
    0..1        Question
    1..1        Type from http://hl7.org/fhir/ValueSet/item-type
    0..*        EnableWhen
    0..1        IsRequired
    0..1        MayRepeat
    0..1        IsReadOnly
    0..1        MaxTextLength
    0..1        AnswerValueSet 
    0..*        AnswerOption
    0..*        PrepopulateValue
    0..*        QuestionnaireItem

      Element: 		DetailsLink
      Description:	"The date on which the item was officiallly deemed acceptable by the publisher."
      Value:			uri

      Element:    Question
      Description:  "The text of the question."
      Value:      string

      Element:    IsRequired
      Description:  "An indication, if true, that the item may occur multiple times in the response, collecting multiple answers answers for questions or multiple sets of answers for groups."
      Value:      boolean

      Element:    MayRepeat
      Description:  "An indication, if true, that the item may occur multiple times in the response, collecting multiple answers answers for questions or multiple sets of answers for groups."
      Value:      boolean

      Element:    IsReadOnly
      Description:  "An indication, when true, that the value cannot be changed by a human respondent to the Questionnaire."
      Value:      boolean

      Element:  MaxTextLength
      Description:  "The maximum number of characters that are permitted in a text field."
      Value: integer

      Element:   AnswerValueSet
      Description:  "Valueset containing permitted answers."
      Value:    ref(ValueSet)

      Element:  AnswerOption
      Description:  "One of the permitted answers for a 'choice' or 'open-choice' question."
      Value:    integer or date or time or string or Coding or ref(DomainResource)

      Element:  PrepopulateValue
      Description:  "One or more values that should be pre-populated in the answer when initially rendering the questionnaire for user input."
      Value:    boolean or decimal or integer or date or dateTime or time or string or uri or Media or Coding or Quantity or ref(DomainResource)  

      Element:  EnableWhen
      Description:  "A constraint indicating that this item should only be enabled (displayed/allow answers to be captured) when the specified condition is true."
      1..1      Question
      0..1      HasAnswer
      0..1      Answer

        Element:    HasAnswer
        Description:  "An indication that this item should be enabled only if the specified question is answered (hasAnswer=true) or not answered (hasAnswer=false)."
        Value:      boolean

        Element:  Answer
        Description:  "The answer to a question."
        Value:    boolean or decimal or integer or date or dateTime or time or string or uri or Media or Coding or Quantity or ref(DomainResource)


EntryElement:   ValueSet
Based on:       DomainResource
Description:    "A set of codes drawn from one or more code systems"
0..1 		    Url
0..1            VersionString
0..1            NameAsText
0..1            Title
1..1            Status from http://hl7.org/fhir/ValueSet/publication-status
0..1            IsExperimental
0..*            SubjectType
0..1            LastUpdated
0..1            PublisherName
0..*            ContactDetail
0..1            DescriptionMarkdown
0..*            UseContext
0..*            Jurisdiction
0..1            IsImmutable
0..1            PurposeMarkdown
0..1            Copyright
0..1            IsExtensible
0..1            ContentLogicalDefinition
0..1            ValueSetExpansion

    Element:    IsImmutable
    Description: "Indicates whether or not any change to the content logical definition may occur"  Value:      boolean

    Element:    IsExtensible
    Description: "Whether this is intended to be used with an extensible binding"
    Value:      boolean

    Element:    ContentLogicalDefinition
    Description:    "Definition of the content of the value set."
    0..1        LockedDate
    0..1        IncludeInactiveCodes
    1..*        IncludeCodes
    0..*        ExcludeCodes

        Element:    LockedDate
        Description:    "If a locked date is defined, then the Content Logical Definition must be evaluated using the current version as of the locked date for referenced code system(s) and value set instances where ValueSet.compose.include.version is not defined."
        Value:      date

        Element:    IncludeInactiveCodes
        Description:    "Whether inactive codes - codes that are not approved for current use - are in the value set. If inactive = true, inactive codes are to be included in the expansion, if inactive = false, the inactive codes will not be included in the expansion. If absent, the behavior is determined by the implementation, or by the applicable ExpansionProfile (but generally, inactive codes would be expected to be included)."
        Value:      boolean

        Element:    IncludeCodes
        Description:    "Include one or more codes from a code system or other value set(s)."
        Value:      CodeSet

        Element:    ExcludeCodes
        Description: "Exclude one or more codes from the value set based on code system filters and/or other value sets."
        Value:      CodeSet

        Element:    CodeSet
        Description:    "A description of a set of codes, to be included or excluded from a value set."
        0..1	CodeSystem
        0..1 	CodeSystemVersion
        0..*    CodeSetConcept
        0..*    CodeSetFilter
        0..*    ValueSetUri

            Element:    CodeSetConcept
            Description:    "Specifies a concept to be included or excluded."
            0..1	CodeValue
            0..1	DisplayText
            0..*    Designation

                Element:    Designation
                Description:    "Additional representations for this concept when used in this value set - other languages, aliases, specialized purposes, used for particular purposes, etc."
                0..1    Language
                0..1    Type from http://hl7.org/fhir/ValueSet/designation-use if covered
                1..1    DisplayText

            Element:    CodeSetFilter
            Description:    "Select concepts by specify a matching criteria based on the properties (including relationships) defined by the system. If multiple filters are specified, they SHALL all be true."
            1..1    Property
            1..1    Operation
            1..1    CodeValue

                Element:    Property
                Description:    "A code that identifies a property or a filter defined in the code system."
                Value:      CodeableConcept

                Element:    Operation
                Description:    "The kind of operation to perform as a part of the filter criteria."
                Value:      CodeableConcept from http://hl7.org/fhir/ValueSet/filter-operator

            Element:    ValueSetUri
            Description:    "Selects the concepts found in this value set (based on its value set definition). This is an absolute URI that is a reference to ValueSet.url. If multiple value sets are specified this includes the union of the contents of all of the referenced value sets."
            Value:     uri

    Element:    ValueSetExpansion
    Description:    "The value set turned into a simple collection of enumerated codes. This element holds the expansion, if it has been performed."
    0..1    Url
    1..1    CreationDateTime
    0..1    TotalCount
    0..1    Offset
    0..*    ExpansionParameter
    0..*    ExpansionCoding

        Element:    TotalCount
        Description:    "Total number of items."
        Value:  integer

        Element:    Offset
        Description:    "If paging is being used, the offset at which this resource starts. I.e. this resource is a partial view into the expansion. If paging is not being used, this element SHALL NOT be present."
        Value:  integer

        Element:    ExpansionParameter
        Description:    "A parameter that controlled the expansion process. These parameters may be used by users of expanded value sets to check whether the expansion is suitable for a particular purpose, or to pick the correct expansion."
        1..1    NameAsText
        0..1    ParameterValue

            Element:    ParameterValue
            Description:    "The value of the parameter."
            Value:  string or boolean or integer or decimal or uri or code or dateTime

        Element:  ExpansionCoding
        Based on:   Coding
        Description:    "The codes that are contained in the value set expansion."
        // Inherits CodeValue, CodeSystem, CodeSystemVersion, DisplayText
        0..1    Inactive
        0..1    NonSelectable
        0..*    Designation
        0..*    ExpansionCoding

        	Element:	Inactive
		    Description:	"A flag that indicates whether the item is inactive."
		    Value:	boolean

            Element:   NonSelectable 
		    Description:	"A flag that indicates whether the use cannot select this item."
		    Value:	boolean

