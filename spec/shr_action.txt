Grammar:		DataElement 5.0
Namespace:		shr.action
Description:	"The Action domain contains base definitions for interventions and procedures, from education to surgery."
Uses:			shr.core, shr.base, shr.finding, shr.entity, shr.encounter, shr.device, shr.research

CodeSystem:     LNC = http://loinc.org
CodeSystem:		MTH = http://ncimeta.nci.nih.gov


//------------ Actions and Interventions -------------

Abstract Element:	Action
Based on:			Content
Concept:			TBD
Description:		"An entry related to an action or intervention, whether potential or actual, past or future. An intervention is an action addressing a undesired health state, behavior, risk, or goal."
0..1 				Type
0..*				Category
1..1				ActionContext
0..*				Reason

	Abstract Element:	ActionContext
	Concept:			MTH#C0449255
	Description:		"The ontological status of the intervention, e.g., performed/not performed, requested/not requested, recommended/not recommended."


Element:		PerformedContext
Based on:		ActionContext
Concept:		TBD
Description:	"ActionContext indicating actual performance or execution of a healthcare-related action, e.g., 3rd dose of Hepatitis B vaccine administered on Dec 4th 2012, appendectomy performed today."
0..1			OccurrenceTimeOrPeriod  // when the action took place
0..*			Participant
1..1			Status should be from http://hl7.org/fhir/ValueSet/event-status  
0..1			Method
0..*			Annotation
0..1			RelatedRequest
0..1			RelatedPlan
0..*			Outcome  // e.g., AdverseEvent

		Element:		Participant
		Concept:		MTH#C1550369
		Description:	"An object (usually a Person, Party, or Organization but potentially a device or other Object) that participates in a task or activity."
		Value:			0..1 ref(Party)
		0..1 			ParticipationType  // role
		0..1			ParticipationPeriod
		
			Element:		ParticipationType
			Concept:		MTH#C1553854
			Description:	"The role played by the participant engaged in the action, for example, as the attending physician, surgical assistant, etc."
			Value:			CodeableConcept from FHIR/v3-ParticipationType
			
			Element:		ParticipationPeriod
			Concept:		TBD
			Description:	"The point in time or span of time the participant is involved."
			Value:			TimePeriod


		Element:		Status
		Concept:		MTH#C0449438
		Description:	"Position in workflow."
		Value:			code or Coding or CodeableConcept
	
		Element:		Method
		Concept:		TBD
		Description:	"The technique used to carry out an action, for example, the specific imaging technical or assessment vehicle."
		Value:			CodeableConcept  // TODO: limit to a procedure code

		Element:		RelatedRequest
		Concept:		TBD
		Description:	"The request that this action fulfills"
		Value:			ref(Action)   // TODO: We can't narrow this to ActionRequested under single inheritance

		Element:		RelatedPlan
		Concept:		TBD
		Description:	"The plan that this action fulfills"
		Value:			ref(Action)   //ActionPlanned
		
		Element:		Outcome
		Concept:		TBD
		Description:	"The result of performing this action, for example, an adverse reaction or new finding."
		Value:			ref(Finding)		

		
Element:		NotPerformedContext
Based on:		ActionContext
Concept:		TBD
Description:	"A record that a clinical act was not performed or never initiated, particularly when there might be an expectation of performing such an act, for example, if a vaccination is not given because of parental objection. Do not use this context if the act was initiated or started but aborted or cancelled."
0..*			Reason
0..1			RelatedRequest
0..1			RelatedPlan

Element:		PlannedContext
Based on:		ActionContext
Concept:		TBD
Description:	"ActionContext indicating intended future performance or execution of a healthcare-related action, e.g., 3rd dose of Hepatitis B vaccine to be administered three months hence."
0..1			ExpectedPerformanceTime
0..1			ExpectedPerformer
0..1			ExpectedPerformerType
0..1			ExpectedMethod 
0..*			Annotation
			
Element:		RequestedContext
Concept:		MTH#C1705178
Based on:		ActionContext
Description:	"An order for something to take place."
1..1			Status should be from http://hl7.org/fhir/ValueSet/request-status // orders with 'draft' or 'entered in error' status do not appear in the SHR
0..1			ExpectedPerformanceTime
0..1			ExpectedPerformerType
0..1			ExpectedPerformer
0..1			ExpectedMethod 
0..1 			Priority should be from http://hl7.org/fhir/ValueSet/request-priority
0..1			PerformerInstructions
0..1			PatientInstructions	
0..1			CommunicationMethod
		
		Element:		ExpectedPerformanceTime
		Concept:		TBD
		Description:	"When an action should be done. If the action is a series or recurs (e.g. daily blood sugar testing in the morning) then a Timing can be used to describe the periodicity."
		Value:			dateTime or date or TimePeriod or TBD "Timing"

		Element:		ExpectedPerformerType
		Concept:		TBD
		Description:	"What type of party should carry out the testing."
		Value:			CodeableConcept // what ValueSet??

		Element:		ExpectedPerformer
		Concept:		TBD
		Description:	"Who should carry out the tests. For example, the patient or caregiver."
		Value:			ref(Role) or ref(Organization)
		
		Element:		ExpectedMethod
		Concept:		TBD
		Description:	"The method that should be used to carry out the action."
		Value:			ref(Method)

		Element:		PerformerInstructions
		Concept:		TBD
		Description:	"Information for the performer of the test, if needed."
		Value:			string

		Element:		PatientInstructions
		Concept:		TBD
		Description:	"Information for the patient, such as, where to get the test, how to prepare for the test, etc."
		Value:			string
		
		Element:		CommunicationMethod
		Concept:		TBD
		Description:	"This is the method the provider used to communicate. Examples include: Written, Telephoned, Verbal, Electronically Entered, Policy, Service Correction, Duplicate, etc. 'Code indicating the origin of the prescription.' - NCPDP Telecommunication (Field 419-DJ, Data Dictionary 201104). Possible values include: Written; Telephone; Electronic; Facsimile; Pharmacy; Not Known."
		Value:			CodeableConcept

Element:		NotRequestedContext
Concept:		TBD
Based on:		ActionContext


Element:		ProposedContext
Concept:		TBD
Based on:		ActionContext
Description:	"An offer or a suggestion to perform a healthcare act. A recommendation to a provider is an example of proposal made by a CDS system. A proposal must be accepted by an entity in order for it to be performed."
1..1			Status from ProposedStatusVS
0..1			ExpectedPerformanceTime
0..1			ExpectedPerformer
0..1			ExpectedPerformerType
0..1 			Priority from http://hl7.org/fhir/ValueSet/request-priority
0..1			PerformerInstructions
0..1			PatientInstructions	


Element:		ProposedAgainstContext
Concept:		TBD
Based on:		ActionContext
Description:	"Concept represents a recommendation from a clinical decision support system or advice from a consultation to NOT perform an act."	

//---------- Procedures ----------------

Element:		ProcedureAction
Based on:		Action
Concept:		TBD
Description:	"Description of a healthcare procedure, independent of action context. This can be a physical intervention like an operation, or less invasive like counseling or hypnotherapy."
1..1			Type from http://hl7.org/fhir/us/core/ValueSet/us-core-procedure-code if covered
0..1			Method
0..*			BodySite
0..1			Facility  // where the procedure was carried out
//0..*			Setting  ??
//0..*			Location  ??
0..1			AssociatedStudy
0..1			PartOfProcedure

		Element:		AssociatedStudy
		Concept:		TBD
		Description:	"The clinical trial or other formal study related to this procedure."
		Value:			ref(Study)

		Element:		PartOfProcedure
		Concept:		TBD
		Description:	"The larger procedure that this procedure is part of (if this procedure is a sub-procedure)."
		Value:			ref(ProcedureAction)
		
Element:		SpecimenCollectionAction
Based on:		ProcedureAction
Concept:		TBD
Description:	"Attribution specific to the collection of a specimen."
0..*			AmountOrSize

	Element:		AmountOrSize
	Concept:		TBD
	Description:	"The quantity of specimen collected"
	Value:			Quantity



Element:		ImagingProcedureAction
Based on:		ProcedureAction
Concept:		TBD
Description:	"Experimental class for an imaging procedure. Note that this class is still incomplete at this time."
0..*			ImagingSubstance

	Element:		ImagingSubstance
	Concept:		TBD
	Description:	"Substance used for this imaging procedure such as a contrast agent."
	Value:			CodeableConcept

Element:		SurgicalProcedureAction
Based on:		ProcedureAction
Concept:		TBD
Description:	"Description of a healthcare action, independent of action context."
0..*			DirectSite
0..*			DirectSiteCode
0..*			IndirectSite
0..*			IndirectSiteCode
0..*			SurgicalApproach
0..*			Access
0..*			UsingDevice
0..*			UsingDeviceCode
0..*			UsingAccessDevice
0..*			UsingAccessDeviceCode
0..*			IndirectDevice
0..*			IndirectDeviceCode

		Element:		DirectSite
		Concept:		TBD
		Description:	"The site where the procedure is performed."
		Value:			BodySite

		Element:		DirectSiteCode
		Concept:		TBD
		Description:	"The site where the procedure is performed."
		Value:			CodeableConcept

		Element:		IndirectSite
		Concept:		TBD
		Description:	"The indirect site for this procedure."
		Value:			BodySite

		Element:		IndirectSiteCode
		Concept:		TBD
		Description:	"The indirect site for this procedure."
		Value:			CodeableConcept

		Element:		SurgicalApproach
		Concept:		TBD
		Description:	"The technique used to reach the site of the procedure. Approaches may be through the skin or mucous membrane, through an orifice or external."
		Value:			CodeableConcept

		Element:		Access
		Concept:		TBD
		Description:	"The route used to access the site of a procedure. It is used to distinguish open, closed, and percutaneous procedures."
		Value:			CodeableConcept

		Element:		UsingDevice
		Concept:		TBD
		Description:	"The device used to perform the procedure."
		Value:			Device

		Element:		UsingDeviceCode
		Concept:		TBD
		Description:	"The device used to perform the procedure."
		Value:			CodeableConcept

		Element:		UsingAccessDevice
		Concept:		TBD
		Description:	"The access device used to perform the procedure."
		Value:			Device

		Element:		UsingAccessDeviceCode
		Concept:		TBD
		Description:	"The access device used to perform the procedure."
		Value:			CodeableConcept

		Element:		IndirectDevice
		Concept:		TBD
		Description:	"An indirect device used for this procedure."
		Value:			Device

		Element:		IndirectDeviceCode
		Concept:		TBD
		Description:	"An indirect device used for this procedure."
		Value:			CodeableConcept




EntryElement:	ProcedurePerformed
Based on:		ProcedureAction
				ActionContext is type PerformedContext
					
EntryElement:	ProcedureNotPerformed
Based on:		ProcedureAction
				ActionContext is type NotPerformedContext
					
EntryElement:	ProcedureRequested
Based on:		ProcedureAction
				ActionContext is type RequestedContext
				
EntryElement:	ProcedureProposed
Based on:		ProcedureAction
				ActionContext is type ProposedContext		

EntryElement:	ProcedureProposedAgainst
Based on:		ProcedureAction
				ActionContext is type ProposedAgainstContext					

EntryElement:	SpecimenCollectionPerformed
Based on:		SpecimenCollectionAction
				ActionContext is type PerformedContext

EntryElement:	SpecimenCollectionRequested
Based on:		SpecimenCollectionAction
				ActionContext is type RequestedContext
			
EntryElement:	ImagingProcedurePerformed
Based on:		ImagingProcedureAction
				ActionContext is type PerformedContext

EntryElement:	ImagingProcedureRequested
Based on:		ImagingProcedureAction
				ActionContext is type RequestedContext

EntryElement:	SurgicalProcedurePerformed
Based on:		SurgicalProcedureAction
				ActionContext is type PerformedContext

EntryElement:	SurgicalProcedureRequested
Based on:		SurgicalProcedureAction
				ActionContext is type RequestedContext

EntryElement:	SurgicalProcedureNotPerformed
Based on:		SurgicalProcedureAction
				ActionContext is type NotPerformedContext

EntryElement:	SurgicalProcedureProposed
Based on:		SurgicalProcedureAction
				ActionContext is type ProposedContext

EntryElement:	SurgicalProcedureProposedAgainst
Based on:		SurgicalProcedureAction
				ActionContext is type ProposedAgainstContext
